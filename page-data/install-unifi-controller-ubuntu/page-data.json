{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/install-unifi-controller-ubuntu",
    "result": {"data":{"markdownRemark":{"html":"<p>POST UP TO DATE 19/08/2015</p>\n<p>Ubiquiti UniFi is properly supported on Ubuntu and Debian, breaking away from being Windows only. Being on Linux also reduces a lot of overhead that Windows typically laid on. The <a href=\"https://community.ubnt.com/t5/UniFi-Updates-Blog/UniFi-3-2-7-is-released/ba-p/1085473\">installation instructions</a> provided by Ubiquiti aren't the best so here's my take on it.</p>\n<!-- more -->\n<p>I will be using a freshly installed Ubuntu 14.04.1 LTS. I previously had issues on installing to a dirty Ubuntu image I've been using as a do-it-all template. There is a section below where I was able to work out those issues though if you are also facing them.</p>\n<h2 id=\"add-the-repository-and-gpg-keys\" style=\"position:relative;\"><a href=\"#add-the-repository-and-gpg-keys\" aria-label=\"add the repository and gpg keys permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add the repository and GPG keys</h2>\n<p>To install the controller you will need to add the Ubiquiti repository to your apt sources list. This one liner does that for you:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">echo 'deb http://www.ubnt.com/downloads/unifi/debian stable ubiquiti' | sudo tee -a /etc/apt/sources.list.d/100-ubnt.list</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Next you will need to add the <a href=\"http://en.wikipedia.org/wiki/GNU_Privacy_Guard\">GNU Privacy Guard (GPG)</a> keys for UniFi and MongoDB (used to store your users and WiFi statistics within the UniFi controller). The GPG keys verifies the genuinity of who you will be downloading from during the installation. Here's another one liner to add both (Ubiquiti first then MongoDB):</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv C0A52C50 &amp;&amp; sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Now perform update to ensure Ubuntu recognises the repository:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">sudo apt-get update</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2 id=\"install-unifi\" style=\"position:relative;\"><a href=\"#install-unifi\" aria-label=\"install unifi permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install UniFi</h2>\n<p>Finally the big moment - installing the UniFi controller.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">sudo apt-get install unifi -y</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>It will install a bunch of dependencies with it including Java 6, MongoDB, Tomcat and a Java SSL certificate tool.</p>\n<p>As of August, the unifi-beta and unifi-rapid packages are obsolete.</p>\n<h2 id=\"access-the-web-interface\" style=\"position:relative;\"><a href=\"#access-the-web-interface\" aria-label=\"access the web interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Access the web interface</h2>\n<p>If everything went smoothly you should be able to access the controller through your web browser: <a href=\"https://unifi-server-here:8443\">https://unifi-server-here:8443</a></p>\n<p>Depending on the version installed, you will be taken to the setup wizard. You're done!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/807b99778923ca63bce41ef071def51b/a54a1/capture2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.05633802816901%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcElEQVQoz4WSy46UQBRA+QVXarcrv8N/8RPc+Csm8w8uNDMDTJy48JGYuHO6G3qgoagXRQEF9QCanpnuMRQuTFx4cuuR1L237st5efbj1fvwyZt3i2dPF8sXi+VysVw+t7L4nzifI/YdVB9+rl3X9X3fs3Ll+1dXvud75+fnFxcXlxbXvXRd1/U83/ddz3M9zzmNw31vjvv+8R8eTqfD/cOdlcP9w/F4+vv1dDo52hiplNJm2B/242HYj13fU6EKaXAlMy5g2WRcgEJIbe7u7sZxHIah7/uu65yu64xW/eFxH3/cX78eNeeVWK9ujNZaq9VqVVWlMXqz2VBKx3G8vb2FEM4uHOtDd/vjAK6Hb297yctabMNQWTbBJssyIUQYhoSQuq6DIEAI9X1vjHFqS9u2sm102xiL1qrrOillUbA8zznnpYUQgjEuy1IIwTl3wjCMoghmcBfHBcuFEJMWL+u6xhgDACCESZJgC4QQpCnCmDG228XOer0OgiBJkt1uRymdDQAAhBAIYQay2T6bzukCAEiSBCEURZEzqzLGyrJs2kYI0QhRVxUlpKoqqVTf91JKSmnOckJpUfC6rlnBgiBwiIUxBmFGCGYFp7wECKcZzouysdR1bTMvWFHYxSmlk3GapnM8q9VNGARRFO9SkGYwzSCAiGCS5zkhBCGM0Jw4RghijJIkcXYWQkgGALIqBGPyB0zpFFSe55RSxqZPq6rSclCtqarKiaJou90ihOY2YGtJp9yKspxq3jSNlNMQKj1toqk//TpbZ1/bRjtxHKdpOhdsbrhSyhjTdV1vmUbQmHlmjOmUkjfplywPG9H+BoBH+Oafy0faAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Capture\"\n        title=\"Capture\"\n        src=\"/static/807b99778923ca63bce41ef071def51b/d6170/capture2.png\"\n        srcset=\"/static/807b99778923ca63bce41ef071def51b/53f68/capture2.png 213w,\n/static/807b99778923ca63bce41ef071def51b/df70d/capture2.png 425w,\n/static/807b99778923ca63bce41ef071def51b/d6170/capture2.png 850w,\n/static/807b99778923ca63bce41ef071def51b/a54a1/capture2.png 901w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"problems\" style=\"position:relative;\"><a href=\"#problems\" aria-label=\"problems permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Problems</h2>\n<h3 id=\"determine-the-problem\" style=\"position:relative;\"><a href=\"#determine-the-problem\" aria-label=\"determine the problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Determine the problem</h3>\n<p>A good start would be to go through the system logs and google the issue:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">cat /var/log/unifi/server.log</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"restart-unifi\" style=\"position:relative;\"><a href=\"#restart-unifi\" aria-label=\"restart unifi permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restart UniFi</h3>\n<p>Just like any other service in Ubuntu, UniFi can be stop, started and restarted.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token command\"><span class=\"token shell-symbol important\">#</span> <span class=\"token bash language-bash\">to stop the controller</span></span>\n<span class=\"token command\"><span class=\"token shell-symbol important\">$</span> <span class=\"token bash language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> unifi stop</span></span>\n\n<span class=\"token command\"><span class=\"token shell-symbol important\">#</span> <span class=\"token bash language-bash\">to start the controller</span></span>\n<span class=\"token command\"><span class=\"token shell-symbol important\">$</span> <span class=\"token bash language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> unifi start</span></span>\n\n<span class=\"token command\"><span class=\"token shell-symbol important\">#</span> <span class=\"token bash language-bash\">to restart the controller</span></span>\n<span class=\"token command\"><span class=\"token shell-symbol important\">$</span> <span class=\"token bash language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> unifi restart</span></span>\n\n<span class=\"token command\"><span class=\"token shell-symbol important\">#</span> <span class=\"token bash language-bash\">to view the controller</span></span><span class=\"token output\">'s current status\n</span><span class=\"token command\"><span class=\"token shell-symbol important\">$</span> <span class=\"token bash language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> unifi status</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"java-home-not-found\" style=\"position:relative;\"><a href=\"#java-home-not-found\" aria-label=\"java home not found permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Java Home not found</h3>\n<p>This issue can be tricky. UniFi cannot access Java to run Tomcat (its web server). To check if you have Java, simply run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">java -version</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>If nothing appears you do not have Java. The latest version of UniFi supports Java 8. To install Java, <a href=\"https://www.digitalocean.com/community/tutorials/how-to-manually-install-oracle-java-on-a-debian-or-ubuntu-vps\">follow this guide from Digital Ocean</a>.</p>\n<p>If you do have Java (or installed it now), you will have to edit the UniFi startup script to point out the location of Java. Open the startup script:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">sudo editor /etc/init.d/unifi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Change the 'JAVA_HOME' location to your new Java location:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">JAVA_HOME=/opt/jdk/jdk1.8.0_XX</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"keystore-file-missing--javaiofilenotfoundexception\" style=\"position:relative;\"><a href=\"#keystore-file-missing--javaiofilenotfoundexception\" aria-label=\"keystore file missing  javaiofilenotfoundexception permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Keystore file missing / java.io.FileNotFoundException</h3>\n<p>When going through the log file you may find the error:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">java.io.FileNotFoundException: /usr/lib/unifi/data/keystore (No such file or directory)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>This error means that the 'keystore' file is missing, resulting in Tomcat not being able to start up. The keystore file is responsible for encrypting your connection (HTTPS/SSL).</p>\n<p>Generate a new keystore file, answering blank to every question including password:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">sudo keytool -genkey -keyalg RSA -alias selfsigned -keystore /usr/lib/unifi/data/keystore -storepass aircontrolenterprise -validity 365 -keysize 2048 -destalias unifi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Restart UniFi when successful and try accessing the web interface again.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">sudo service unifi restart</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","timeToRead":3,"excerpt":"POST UP TO DATE 19/08/2015 Ubiquiti UniFi is properly supported on Ubuntu and Debian, breaking away from being Windows only. Being on Linux…","fileAbsolutePath":"/home/runner/work/calvin.me/calvin.me/master/posts/2015/2015-01-17-install-unifi-controller-ubuntu/index.md","frontmatter":{"title":"How to install the UniFi Controller on Ubuntu","categories":["Networking"],"tags":["guide","install","Ubiquiti","ubuntu","unifi controller"],"thumbnail":{"childImageSharp":null,"extension":"svg","publicURL":"/static/54f0c7e063fd3b2a5e14deaf6aa77d36/thumbnail.svg"}}}},"pageContext":{"filter":"/^.*\\/\\d{4}-\\d{2}-\\d{2}-install-unifi-controller-ubuntu\\/.*$/"}},
    "staticQueryHashes": []}