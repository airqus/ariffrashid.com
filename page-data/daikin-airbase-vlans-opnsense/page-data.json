{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/daikin-airbase-vlans-opnsense",
    "result": {"data":{"markdownRemark":{"html":"<p>The <a href=\"https://www.daikin.com.au/controllers/daikin-airbase\">Daikin Airbase</a> is a Wi-Fi connected interface for controlling Daikin ducted air conditioning units. This gives the convenience of controlling temperature, timers, and zones from a mobile device or voice assistant.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f47f093e422354d7d2ad0181b8ada45a/b4ad3/app-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 209.8591549295775%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"app 02\"\n        title=\"app 02\"\n        src=\"/static/f47f093e422354d7d2ad0181b8ada45a/d6170/app-02.png\"\n        srcset=\"/static/f47f093e422354d7d2ad0181b8ada45a/53f68/app-02.png 213w,\n/static/f47f093e422354d7d2ad0181b8ada45a/df70d/app-02.png 425w,\n/static/f47f093e422354d7d2ad0181b8ada45a/d6170/app-02.png 850w,\n/static/f47f093e422354d7d2ad0181b8ada45a/b4ad3/app-02.png 1080w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/af2c48b1284497525f4fa2522fa48b9f/b4ad3/app-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 210.3286384976526%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAIAAAA8m+yHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEO0lEQVRIx8WVS0skVxiGj2i7GbysdCVEVy4ySBQk7cplBpOFxF4o0YXgxowEF/4CF0bwDxgFM2FocExjxEWgiQRUCAOJoxE12tr3rq5bd9fl1LlUnaoKbfX0VLp1NJlFHs6mqnjre+v73nMKuK7LnPKyXdd2XNd1LWYLii7rWNU0QRB4XpDlgihKq6urCwsLm1uvTJchhh3XAa7rcsg+KZq/y/Q3keimY2Cyd3p9IugcL8ZvbmKxa47jDg4OP3v27OOnT797uQ5dLJkF4lDglAs6tuM4rsvKhcsWFExVTKFhKIoiiKJpWT+8+H70i8+/ef61gRB2TcSI47hAIRQylpWk47Pzs1js9PLqPB7PiCKyHc20oMWgxYjNsoZ1JKM3khFXCWE2tCxoWqBEqGaxlCi9Pj758yp2cnn15vziOpeDtlOiZhrSpE4zkP4h41849HPWeC2hDCQJnSR1AhRFKSmKqmkIYwMhAyEdQlGS8zyfzXF/ZfjLrHCRzieFAlcocYVSVi4lxFJSKi+AEbLMMpQQ4xYIoX6LpmnIgNiACOoYGRghjBBByKLEooRiBAghmUwmnU7zPG/5YLdUL823i5qmJMvFUonZNsAYn52dnZ6eHh8fE0LMhyCE8DxfKBQYY8A0TdebkG3Tx+GZIoQASqmqqt53PqayaZqGYSCELMsCmqZFo9H9/f2Dg4N8Pu/Vf79tr0G2bZcrY4wRQhjj+3z6xf47gDEvlO+jqvErKaUgEon09vYODAx8Ukd/f39fX18wGMzlcq7rejJKaTabrdje29sLhUJTU1Nf1TE5OTkxMTE9PS0IguM4VbGqqoZhlBv2GNuMMb9t27Yrozo8PJyZmZmbm3t+F7Ozs/Pz85IkVadAKZUkqVgslkMSDoc7Ojp6eno+qqO7u7urq6u3tzebzVa/2UtYRfwfuv0uYfF4PBKJ7Ozs/HQX29vbu7u7mqYxxu5I2NraGgAgEAg01tHU1AQAaGlpSaVSftupasIURYnH44n7SSaTGOPyrnybDUKpd1HeVdZD1KTVqiZsY2OjsbGxvb29tY62trYnT550dnam02nPNqXUtZ1o7GL8x5eYEnB0dLS4uLi8vPztXSwtLa2srBSLxeqcbcvKlYq/xi4fuzFqnDu27RkB0Wh0ZGQkFAp9WcfY2Njo6Oj4+HhNtiVJqhxD29vbfX19Q0NDn9YRDAYHBweHh4c5jquK/3XCamy/S1gsFguHw1tbW6/uYnNzMxKJ3Juw9fV1AEBzc3NTHYFAoKGhobW1tSZhaX/Ckslk6n7S6XRNwj7oDKsC7ntw3+npB5gfwP8urvxH/8mDN4HXD1VVZVlGCPn7p2maoij+zhFCZFmGEFb2s/cyXdcFQYQQ+ueZz+cFUaS+mgihRCKhqqoXuIpYlKTYTbxUUvwx5PJ5XhC811HTZIyJknQTT3B53rP9N4DjVfGaMrk0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"app 01\"\n        title=\"app 01\"\n        src=\"/static/af2c48b1284497525f4fa2522fa48b9f/d6170/app-01.png\"\n        srcset=\"/static/af2c48b1284497525f4fa2522fa48b9f/53f68/app-01.png 213w,\n/static/af2c48b1284497525f4fa2522fa48b9f/df70d/app-01.png 425w,\n/static/af2c48b1284497525f4fa2522fa48b9f/d6170/app-01.png 850w,\n/static/af2c48b1284497525f4fa2522fa48b9f/b4ad3/app-01.png 1080w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>This feature requires the Daikin Airbase BRP15B61 adaptor. It must be connected to the same Wi-Fi network as the mobile device to control the air conditioner locally. Otherwise, a 'remote' connection can be made over the Internet.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd5a77b4f3d3024c65f75290e781e4a7/81f49/adapter.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.11737089201877%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDAv/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABvubzQQf/xAAXEAEAAwAAAAAAAAAAAAAAAAABABEg/9oACAEBAAEFAglZ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAARAgMf/aAAgBAQAGPwKNK//EABkQAAIDAQAAAAAAAAAAAAAAAAERABBBcf/aAAgBAQABPyGBWmCFsAWnTX//2gAMAwEAAgADAAAAEG/v/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERITFR/9oACAEBAAE/EENoltH0WhnWCren0cG9P//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"adapter\"\n        title=\"adapter\"\n        src=\"/static/cd5a77b4f3d3024c65f75290e781e4a7/8a34a/adapter.jpg\"\n        srcset=\"/static/cd5a77b4f3d3024c65f75290e781e4a7/08b27/adapter.jpg 213w,\n/static/cd5a77b4f3d3024c65f75290e781e4a7/6f6b2/adapter.jpg 425w,\n/static/cd5a77b4f3d3024c65f75290e781e4a7/8a34a/adapter.jpg 850w,\n/static/cd5a77b4f3d3024c65f75290e781e4a7/63107/adapter.jpg 1275w,\n/static/cd5a77b4f3d3024c65f75290e781e4a7/fef31/adapter.jpg 1700w,\n/static/cd5a77b4f3d3024c65f75290e781e4a7/81f49/adapter.jpg 4032w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>I segregated the Airbase controller onto my IoT VLAN where it has no access to important devices like my router, servers, or switches. However, this meant I wouldn't be able to access it locally as it was on a different VLAN. Even after enabling the <a href=\"https://docs.opnsense.org/manual/how-tos/multicast-dns.html\">OPNsense MDNS Repeater</a> (equivalent to <a href=\"https://docs.netgate.com/pfsense/en/latest/packages/avahi.html\">Avahi</a>), the Airbase was still not visible or connecting. This meant the Daikin app wasn't using <a href=\"https://en.wikipedia.org/wiki/Multicast_DNS\">multicast DNS</a> to discover the adaptor.</p>\n<p>It led me to dig into OPNsense logs to find what connection the app was trying to make. This can be done by enabling logs on individual firewall rules, and then watching the Firewall Log with filters applied. The logs showed me the Daikin Airbase app was attempting to make a UDP connection from my device on port :<code class=\"language-text\">30000</code> to the broadcast address on port :<code class=\"language-text\">30050</code>. This is a UDP Broadcast instead of mDNS/DNS-SD which is why MDNS Repeater/Avahi wasn't working.</p>\n<p>To allow UDP Broadcasts across networks, OPNsense provides the <a href=\"https://github.com/opnsense/plugins/tree/master/net/udpbroadcastrelay\">udpbroadcastrelay plugin</a> by <a href=\"https://github.com/marjohn56/udpbroadcastrelay\">marjohn56</a>. The plugin listens for packets on a specified UDP broadcast port, and when a packet is received, it sends that packet to all specified interfaces. After installing the plugin, it can be found under Services > UDP Broadcast Relay.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14739075e86d4e51de02b8c1e07473fd/4e1ad/plugin-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.572769953051644%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVQI1x3BQQrAMAgEwL5J7SXo3gQPSUQE//+UQmceADOTmRGhqgDcPTP33vfe7q6qc85aS0TeHzObGRF9+0YPu2TlHakAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"plugin 02\"\n        title=\"plugin 02\"\n        src=\"/static/14739075e86d4e51de02b8c1e07473fd/d6170/plugin-02.png\"\n        srcset=\"/static/14739075e86d4e51de02b8c1e07473fd/53f68/plugin-02.png 213w,\n/static/14739075e86d4e51de02b8c1e07473fd/df70d/plugin-02.png 425w,\n/static/14739075e86d4e51de02b8c1e07473fd/d6170/plugin-02.png 850w,\n/static/14739075e86d4e51de02b8c1e07473fd/12c14/plugin-02.png 1275w,\n/static/14739075e86d4e51de02b8c1e07473fd/de891/plugin-02.png 1700w,\n/static/14739075e86d4e51de02b8c1e07473fd/4e1ad/plugin-02.png 2008w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c648010c5a3d0ddec064f724f2f52f2/a6f0e/plugin-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 135.2112676056338%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqUlEQVQ4y4WUy27TQBSG8xaIxrE947k4Httz9T2xA+2KNhSxYcOCPU+SIiQ2vC+KT+O4aYBPo2hs6eQ/559/vPi2Qb+/mp9f1NMjOdwHh314eAgPe/TjEb9YH8/raY9+fSbf39NFkbFPt83+XfPQu/uNvt/oD526K5JWhF2KprXNo/kaFNUcLVBE1mkeiyzJJEuyJFMi11xkEV9jFtNYEJ5gGr9dBW+94GYVTuvNzXIhhLi7vd0N/TD0Q993bVOVZde2bTNuurZr26aulZQoDKeFEVp53oIQYq3VWiulpJRpmgZBEL6CEDJ/RAh5nrdgjDnn7AljTFEUzrmyLIuRsizzPPd9/0ox57woCmPMpG9G9Ag8SikvGnkujqJISimEkFJmI3mep2kKe6UUIcTzvNeDrFar48ygbIzhnJMRjHE0AnuE0HVlznlVVeCWUiodUUoJIYwxCCF/5HoxYwymUkpprefT5nmulIJB0MjUxVm5LEsods6Bc2C71tqNWGvBFyEExjgIgudiSqkxZmobNlJKrTV4ZoxJ01RKaYxJkgRScG67qio41XJEa40xppTOPQMLMcaXhkFXMCcACjAhQig6Mdl+Vi6KIh+x1k718Aa6hTdaa0LIi7YppeAT5AHU8AmEUDDjylGBcpZlWmvIGZyQUopSevWenJXBJDgeay3nfErY1cpLZQiW1hqCASGL4/g/xXCrIFXOOQgTGDu3F/5l+j0rW2svlGF4pRTUX+WcMMBa65yDYkglfA+mFEFa67rmnC+Xy0WWZcMwbLfb3W43DMNut+u6brvdgjJEFW5OfgJO4agchuF6vWaMcc7jEcZYGIbejOVy6b3E9/2jshCi7/u6rkFws9lUVZX9EyFEmqaEkGNx0zTVjLqu27/TdV1RFHVdJ0nyB8Q6EuO8JmKdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"plugin 01\"\n        title=\"plugin 01\"\n        src=\"/static/6c648010c5a3d0ddec064f724f2f52f2/d6170/plugin-01.png\"\n        srcset=\"/static/6c648010c5a3d0ddec064f724f2f52f2/53f68/plugin-01.png 213w,\n/static/6c648010c5a3d0ddec064f724f2f52f2/df70d/plugin-01.png 425w,\n/static/6c648010c5a3d0ddec064f724f2f52f2/d6170/plugin-01.png 850w,\n/static/6c648010c5a3d0ddec064f724f2f52f2/a6f0e/plugin-01.png 1232w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Within the plugin, add a new relay with the following settings:</p>\n<ul>\n<li>Relay Port: <code class=\"language-text\">30050</code></li>\n<li>Relay Interfaces: The network Daikin Airbase is on (IoT) and any other networks that need to connect to it (Userland, etc.)</li>\n<li>Instance ID: 1</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ead6e2ecd450d9ac5a26b35cad874204/bf7a7/step-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.74647887323944%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZUlEQVQoz33PyW7bMBAGYL6JGzuhlkjiMgspU0qkkHIWJy1Q9NRbH6ABbKC3PnzRGAYEO8mH/zTAYP4Rf7/Dn221i8tdWu7Tah9X+2m1S8vXcfE6vJ/ft4tdvPhBC/Gc+ilQdCp6HVuI3iSvo9epNZ/ka1xTJcXz9smtO2XAANk2anDKgLI4jwE6CbC/lJl4mOIwDMyMAIhAhFV1PVdXFSGehImK61yku3EcxxDWzByYbtYtETVNo46ste6M974sC3E33g7DEEKw1oLWqq5UXWvVzMEZRJRSirb1zjkiREQP1lvTgglg5vAMEf1ffrqfps3GO8fMWuu6OaWU4jPe+yzLxCbFrusPTZxzxpjDq1rrjy4DomPKpBTfto9p2hymfd+7twrMbK39pLZC9+VSii4Edu7wBiKGELquCyEQkTHGvqEZRFDG/ox2AinKsszzvDjKj4qiKI+KmTzLllfZr5urF7v4BycjlfbZI7ffAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"step 01\"\n        title=\"step 01\"\n        src=\"/static/ead6e2ecd450d9ac5a26b35cad874204/d6170/step-01.png\"\n        srcset=\"/static/ead6e2ecd450d9ac5a26b35cad874204/53f68/step-01.png 213w,\n/static/ead6e2ecd450d9ac5a26b35cad874204/df70d/step-01.png 425w,\n/static/ead6e2ecd450d9ac5a26b35cad874204/d6170/step-01.png 850w,\n/static/ead6e2ecd450d9ac5a26b35cad874204/12c14/step-01.png 1275w,\n/static/ead6e2ecd450d9ac5a26b35cad874204/de891/step-01.png 1700w,\n/static/ead6e2ecd450d9ac5a26b35cad874204/bf7a7/step-01.png 1858w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Create a firewall rule on the Daikin Airbase's network, with the source set to the incoming networks and the destination as the broadcast IP address (the last IP address). The source is set to the incoming network as udpbroadcastrelay will rebroadcast the UDP packet as if it originated from the same network.</p>\n<ul>\n<li>Protocol: UDP</li>\n<li>Source: User network</li>\n<li>Destination: Broadcast IP address (i.e., <code class=\"language-text\">192.168.3.255/32</code>)</li>\n<li>Destination Port: <code class=\"language-text\">30050</code></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 797px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9be0fc2d7cd8559ef6628b363762fd42/045f5/step-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 130.0469483568075%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVElEQVQ4y42UWXLiMBRFvZ7gQfMs2RoM2Didqv7p/e+kSxJx3AEqffihDNdvvK+RSi3rcr1cheCEEEopK9AHyIEYg6S4GRW7nM+iUH9o2/Z0OnUH+r5HCPEDSikEYSMZCcFLKQkhWqsYvLVWSgmGARRQAWPMDnDOAQDNJOm2LlIqgrFx8eP3n49f77dtS2lOKaUYjdaccyHEE7EVdI6RC8E5o1ybMf9bazOO0ziOzjnOGUKIEHJMWwgBIWw0J+d51lozxhmjBOPTv7Rt23fdt5q/xHNKQsiaD4Swf8ZzsSnilKJSqs6j7/vuAQjh88gxBGOsEIJSWjvxLewwDC/TTjHUZlKal2QYhv+NbErkGBPnfBzHaZowxvUf7DX3UfmRXa9nKdX+SqUURqiuxw9iRolS8hhKaY0Q6kudP4il0s5aQghjrBgj184oFXltXrI3jKUUvffOOWOM915IUb31s9hper2cY4h5J01eTfoZdrfny7S1pvOcnHM1bSGEtdaabKxhGF7J72KESf6UmmmJZa1FGJ1Op31JqqUBALs99jnTc0oxxBiiKSil9m7VG1JXaJd9RRaMFOdllFbOOYxxXUkAwH3yuRFk+KRWl8U14Uo+Jio3rDqxK05ECFFKjdFvb2/1IQCgBmiOLs8bUsQAAFiol6g8VxDC+q76peu6ZpQ0TFO+BJQw5ePl43Zbl3Vd1+X9fdu2bZqmx7HfG2YFWZelXJJMae6jn9ta53exZMQ5q8uVY4zhB2r+r29YmsdpqoOx1oYQpnHy3vvgQ4ysOPzpMfgLlrlLl0dKY/0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"step 02\"\n        title=\"step 02\"\n        src=\"/static/9be0fc2d7cd8559ef6628b363762fd42/045f5/step-02.png\"\n        srcset=\"/static/9be0fc2d7cd8559ef6628b363762fd42/53f68/step-02.png 213w,\n/static/9be0fc2d7cd8559ef6628b363762fd42/df70d/step-02.png 425w,\n/static/9be0fc2d7cd8559ef6628b363762fd42/045f5/step-02.png 797w\"\n        sizes=\"(max-width: 797px) 100vw, 797px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Create another firewall rule on the Daikin Airbase's network to allow it to respond to the incoming network but only on port <code class=\"language-text\">30000</code>.</p>\n<ul>\n<li>Protocol: UDP</li>\n<li>Source: Daikin Airbase</li>\n<li>Destination: Incoming network</li>\n<li>Destination Port: <code class=\"language-text\">30000</code></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9d2d02af1a68a16311e9e2398b64b7c/4cff2/step-03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 145.07042253521126%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAIAAAAl5NuSAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcUlEQVQ4y32UWXbjIBBFvZ5YA0MxCZAAWYOdTjr/vf999DFl0Yqt9P3SETzq1QAnznmMMaXkvaeUsgw/gm1wDr33rK1PnYR1vgxDsNYqpYQQ+31PqA3nHCPkpICF3sksE0KAEG3TvL29VVVVb1SZtm3ljrZtTxrYlMIQgpTS2u7z4/1ymaZpMsZwzvFEKaX6jtb6LjaCXqfUWScESG3Xzz+/Pz/e33+t63q73eZ5XpbFe4/6ElYphWI2pcE6d19SWhmvlMRoWmvcyjnHWj5HlvecvbuLlZQCOKvq+vydkvOzWAt+ScH7Hs1QSpsXsGyEkIPIcfC+7002yTknhDRHHIg1sBT6NI7DMGBtCSH7PhWObAO7xGCdwyIxxiilh+KDyCrbdt4bY5RSXddRSkmm3SAbr31mlziEGL1z1tp1XQEAlwtF89Jnw+cpGtM9xhPAZAghJVXOufzOQ8w5M7vjyzwW84QQADgWCylDjPgLlVprANjbli88xFJA6Psug4bxlKetP1wMoMsY0ziGEGKM8zxzzp+2/hi5M3yZU0ojumWMWWuFEPvZeM35EZltcfA8xhjWnOxAL0eRJb8t0zheUopa63EccVr21fLel9PLR85Zq2WesGDlDpfLQCktoZ5uSLadfRY/ACCEqDbqusb3UEq5v96MsaZp/uVcJkQpVdd1iVNVFQA45+gGFuJ8Pp800BS8lHdl13VfX1/Lslyv12VZbrfbNTMMAw78c7WNYPP2kmitcUjKtOEHvhD7/j/EwNmQ3zCsSnmlS85N07Rt2zTNgTi/niHlDhVLuIw+6Y6DyNbe+1Qa6PLF9t7jtP9H/BcCO2yfFyJ8oAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"step 03\"\n        title=\"step 03\"\n        src=\"/static/c9d2d02af1a68a16311e9e2398b64b7c/d6170/step-03.png\"\n        srcset=\"/static/c9d2d02af1a68a16311e9e2398b64b7c/53f68/step-03.png 213w,\n/static/c9d2d02af1a68a16311e9e2398b64b7c/df70d/step-03.png 425w,\n/static/c9d2d02af1a68a16311e9e2398b64b7c/d6170/step-03.png 850w,\n/static/c9d2d02af1a68a16311e9e2398b64b7c/12c14/step-03.png 1275w,\n/static/c9d2d02af1a68a16311e9e2398b64b7c/4cff2/step-03.png 1404w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>The Daikin Airbase app should now be able to connect to the controller across VLANs. I watched the firewall logs and could see:</p>\n<ol>\n<li>The app sends a packet from port <code class=\"language-text\">30000</code> to port <code class=\"language-text\">30050</code> on the broadcast IP address</li>\n<li>udpbroadcastrelay rebroadcasts the request to port <code class=\"language-text\">30050</code> on the broadcast IP address where the Daikin Airbase resides</li>\n<li>The Daikin Airbase responds from a random port to the app on port <code class=\"language-text\">30000</code></li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2a14d72b3985b0416bf902538f4063a/973af/firewall-log.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.981220657276995%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAa0lEQVQI1z3IWw7CIBAF0C5Jy6NpTYFh5oJJYwM4dv9LMf6YnK8zxTPwyDyyr456ggoUFoZ6KgpRcbDbsVoYX9xS/d8936Zw7nkQdfLFpRahQi3OPFNL/OY8fv84tvDaywfPq0KlXgUqFuYLZH4fOZKsWiEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"firewall log\"\n        title=\"firewall log\"\n        src=\"/static/e2a14d72b3985b0416bf902538f4063a/d6170/firewall-log.png\"\n        srcset=\"/static/e2a14d72b3985b0416bf902538f4063a/53f68/firewall-log.png 213w,\n/static/e2a14d72b3985b0416bf902538f4063a/df70d/firewall-log.png 425w,\n/static/e2a14d72b3985b0416bf902538f4063a/d6170/firewall-log.png 850w,\n/static/e2a14d72b3985b0416bf902538f4063a/12c14/firewall-log.png 1275w,\n/static/e2a14d72b3985b0416bf902538f4063a/de891/firewall-log.png 1700w,\n/static/e2a14d72b3985b0416bf902538f4063a/973af/firewall-log.png 1956w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","timeToRead":4,"excerpt":"The Daikin Airbase is a Wi-Fi connected interface for controlling Daikin ducted air conditioning units. This gives the convenience ofâ€¦","fileAbsolutePath":"/home/runner/work/calvin.me/calvin.me/master/posts/2022/2022-01-21-daikin-airbase-vlans-opnsense/index.md","frontmatter":{"title":"Daikin Airbase Across VLANs","categories":["Networking"],"tags":["daikin","vlans","aircon","opnsense"],"thumbnail":{"childImageSharp":null,"extension":"svg","publicURL":"/static/5256c7165efcd687d3c018514987e925/thumbnail.svg"}}}},"pageContext":{"filter":"/^.*\\/\\d{4}-\\d{2}-\\d{2}-daikin-airbase-vlans-opnsense\\/.*$/"}},
    "staticQueryHashes": []}