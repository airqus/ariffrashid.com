{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/part-4-install-pfsense-esxi-5-5",
    "result": {"data":{"markdownRemark":{"html":"<p>Now that our pfSense installation is set up and working, we will have to wrap up our installation with a few necessities such as VMware Tools. You can find follow along our installation in <a href=\"/part-1-install-pfsense-on-esxi-5-5/\">Part 1</a>, <a href=\"/part-2-install-pfsense-esxi-5-5/\">Part 2</a> and <a href=\"/part-3-install-pfsense-esxi-5-5/\">Part 3</a>.</p>\n<!-- more -->\n<h2 id=\"part-4-necessities-and-wrap-up\" style=\"position:relative;\"><a href=\"#part-4-necessities-and-wrap-up\" aria-label=\"part 4 necessities and wrap up permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Part 4: Necessities and Wrap-up</h2>\n<h3 id=\"install-native-vmware-tools-for-pfsense\" style=\"position:relative;\"><a href=\"#install-native-vmware-tools-for-pfsense\" aria-label=\"install native vmware tools for pfsense permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Native VMWare Tools for pfSense</h3>\n<p>VMware Tools are available for FreeBSD, if you selected it as the virtual machine's operating system. VMware Tools are important for increasing performance by allowing it to interact better with its hypervisor. It is extremely important in pfSense because it offers 10Gbp network cards via the vmxnet3 driver.</p>\n<p>Ensure your pfSense can access the internet.</p>\n<h4 id=\"1-access-the-pfsense-shell\" style=\"position:relative;\"><a href=\"#1-access-the-pfsense-shell\" aria-label=\"1 access the pfsense shell permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Access the pfSense shell</h4>\n<p>Either through the console (option number 8) or by enabling Secure Shell (SSH) within 'System -> Advanced'. Connect to pfSense via any SSH utility you have if you prefer SSH (e.g. Putty).</p>\n<p><em>Enable SSH in within the pfSense web interface via 'System -> Advanced'.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 751px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ede02609095450d266097b82d293ccc/05d18/enable_ssh.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.187793427230048%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB0wUH/8QAFhAAAwAAAAAAAAAAAAAAAAAAAAIS/9oACAEBAAEFAoUhSVP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAADAQEAAAAAAAAAAAAAAAAAATEykf/aAAgBAQAGPwKIiMrh/8QAGRAAAQUAAAAAAAAAAAAAAAAAAQAQEcHh/9oACAEBAAE/IZBUhhND/9oADAMBAAIAAwAAABAEH//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCsrP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAIDAQAAAAAAAAAAAAAAAAARAZHRof/aAAgBAQABPxBI65Ih8OCMWH//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Enable_SSH\"\n        title=\"Enable_SSH\"\n        src=\"/static/6ede02609095450d266097b82d293ccc/05d18/enable_ssh.jpg\"\n        srcset=\"/static/6ede02609095450d266097b82d293ccc/08b27/enable_ssh.jpg 213w,\n/static/6ede02609095450d266097b82d293ccc/6f6b2/enable_ssh.jpg 425w,\n/static/6ede02609095450d266097b82d293ccc/05d18/enable_ssh.jpg 751w\"\n        sizes=\"(max-width: 751px) 100vw, 751px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"2-enable-downloading-of-packages\" style=\"position:relative;\"><a href=\"#2-enable-downloading-of-packages\" aria-label=\"2 enable downloading of packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Enable downloading of packages</h4>\n<p>pfSense by default prevents you from downloading packages for good reason, it could break your firewall! The safest thing to do would be to build the packages on a separate system and copy them over to pfSense. But if you insist to be able to install packages straight from the pfSense shell (like me) there is a simple workaround.</p>\n<p>First you will need to change where pfSense gets its packages from. As of this post, pfSense 2.1.4 is based off FreeBSD 8.3-RELEASE-p16. Find the URL that fits your version. Run the follow commands in the shell:\nFor 64 bit:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">setenv PACKAGESITE \"http://ftpmirror.your.org/pub/FreeBSD-Unofficial-Packages/83amd64-default/Latest/\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>For 32 bit:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">setenv PACKAGESITE \"http://ftpmirror.your.org/pub/FreeBSD-Unofficial-Packages/83i386-default/Latest/\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Once the package site has been set, install 'perl'</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">pkg_add -rv perl</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Finally install the compatibility library for your version of pfSense</p>\n<p>For 64 bit:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">pkg_add -rv compat6x-amd64</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>For 32 bit:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">pkg_add -rv compat6x-i386</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><em>Use Putty to SSH into pfSense. Putty makes it easier to copy and paste code instead of typing it which almost always leads to spelling mistakes.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 675px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7178b8b3d2e8e2de0a3cdf4ab012c538/a0bb6/capture.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.91079812206573%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+0lEQVQoz32Ry0ocQRSGy66+VHVV36q77mV3G2aSbBQHpg3OJGBWcZFNBAkoCnmF+CrmAQYnY7IKmhcM3R3EiOTnLA7F+f7zcwpcXn45Pz/7dHK6WL7rum65fLu7t7fbLWbzbnF42HXd/mw2n89n+/tH74/eHBx8PDn9fHZx/OH469UVyPMsHZQkCStZlmeE0oIxjDH0PAih7/tBEGxtbYFBY4MQ2mw2IElTbXRVlUXByrKqeMX74knS22VZxjlXWlFKH8MY4x4uipwQQikdR4uiQAj7vu8NayGE4F89wOv1d2CsFoJXXCillFbOWSGFNjrP8j4A50PywPPgE/jm5gYYY5qmMUb2JeVO2xijyrKQgm1vu7ZthJRc9NaU0iAIRguM8Wq1Alpr62zTuKa1TmtnTcVZklKM/DAMwiiCEIZRhBBCGIdhOMJxHA+w0UO6SimpjRZSlmXZ35yQOI7HX6CUxnFMCEnTJM0ymiRCiPV6DUbGOmud2a5rrTVjLM9z0xuJJPsLE0qyoc+zPCZECHF7uwHGWiFEEAwhw8gPfAg93/dxHD+EfPbatz9+Auus1iqMnpkbR5/I87wRvru/B6xkTdsoKSteFQXDCIH/atwcRej33S9Q1/V0Onmx004mk1evX06nE+ectdYYo5QabsnlI42PdV1fX3/7Ax9eSW/McIimAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Download packages\"\n        title=\"Download packages\"\n        src=\"/static/7178b8b3d2e8e2de0a3cdf4ab012c538/a0bb6/capture.png\"\n        srcset=\"/static/7178b8b3d2e8e2de0a3cdf4ab012c538/53f68/capture.png 213w,\n/static/7178b8b3d2e8e2de0a3cdf4ab012c538/df70d/capture.png 425w,\n/static/7178b8b3d2e8e2de0a3cdf4ab012c538/a0bb6/capture.png 675w\"\n        sizes=\"(max-width: 675px) 100vw, 675px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"3-load-vmware-tools-into-pfsense\" style=\"position:relative;\"><a href=\"#3-load-vmware-tools-into-pfsense\" aria-label=\"3 load vmware tools into pfsense permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Load VMware Tools into pfSense</h4>\n<p>Open the vSphere Client and connect to your ESXi host. Locate your pfSense VM and ensure the Guest OS matches FreeBSD (32 or 64 bit depending on your version). This lets ESXi know which VMware Tools package to provide it with.</p>\n<p><em>I am running the 64 bit version of pfSense. This lets VMware know which version of VMware Tools to install.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 369px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/58c7777ce273bb261c537d21f115b5ee/d8ad8/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.85446009389672%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkUlEQVQ4y3VSu24TQRT1ZxEKgvMFSUHskjpBIrYoaaGlIzSQhgiEcSAhDQhMCkQTEHnIXj/3Ze88d2ZW9r68691Bu44shZijKWbm3nvOnTO3cL/69NGT3a3Hz4qlyurmzt1SpViurpWrxVLl1vpWvqkWy5XbGw/u3Ht4t1RZWd9eK1dXN3dWNrYLP36eIgsAa3T6p/n2w9faYePdx2+1w0b90/fdvfp+7XPtqHFwfPJq/+jl66OD45Pne+/f1L/UDhsv9uoFwxyenrd+XbYHuqkb2kBT1XxpumYOTT2DpuVHTc/udV1XNbU/6BNCCqqun543f18o3YGGKQEQQYQBhIZh9Hr9gapphjEcWRBhiDDCGKJ5AqKUFhzHUfu9jqKMRpaUMk1TKWUYhkPTBAASkhG5np+F5DWEYVjgnKmqBjMmFsdxkiRSyuk0Ely4nrdITa9DShkEQYEz1mq2LAvMZrOFchRFbUVptdpSyiRJb+JKmTHW7XQH/b4F4HA41DQ9SdM4iiEEvV5vPHEXjP8gCMKCEAJBxBijlCKEfT97XhCGjHHOmG0zx3GEcOb77JJzh9tJmlwptxXl7Oz84uJS04w5q+d5/f7ANE1qM8EF54JSyhgjmBBKWwNqidTzc+Uoinw/8Dw3DMOFQdMwnE6jZf3KIJLuVPp52xxBBAHEmCzCs1kMIbZte+HicsOEEAAAjMlk4i6MiaMIQYsg4Lvjm26li38WQjSbLULIXCFJ5qxxTyeKShTVJs4sWdb8vJh3Ox2EMITQyycpazuRIpDcl3gioSOj2X+KHSEMPRv5bqdrmiOEMKW267qCU3fMJ2ESxnIp8gnjHABgWRbO5940TcsCts1QfrTF2Bm7nrsEnuf9Be7HkMy7vDPdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pfsense-vm-settings\"\n        title=\"pfsense-vm-settings\"\n        src=\"/static/58c7777ce273bb261c537d21f115b5ee/d8ad8/2.png\"\n        srcset=\"/static/58c7777ce273bb261c537d21f115b5ee/53f68/2.png 213w,\n/static/58c7777ce273bb261c537d21f115b5ee/d8ad8/2.png 369w\"\n        sizes=\"(max-width: 369px) 100vw, 369px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Open a console to the pfSense virtual machine and click: 'VM -> Guest -> Install/Upgrade VMware Tools'</p>\n<p>or if you are in VMware workstation: 'VM -> Install VMware Tools'</p>\n<h4 id=\"4-mount-and-install-vmware-tools\" style=\"position:relative;\"><a href=\"#4-mount-and-install-vmware-tools\" aria-label=\"4 mount and install vmware tools permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Mount and install VMware Tools</h4>\n<p>Run the following line by line to mount the the VMware Tools disk, unpack its contents and install i:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">mount -t cd9660 /dev/acd0 /mnt/\ncd /tmp\ntar xvzf /mnt/vmware-freebsd-tools.tar.gz\ncd vmware-tools-distrib/\n./vmware-install.pl -d</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If it fails to install the first time, run the final line again for a reinstall.</p>\n<p>Remove the leftovers after the installation:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">rm -f /etc/vmware-tools/not_configured</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"5-set-vmware-tools-to-start-on-boot\" style=\"position:relative;\"><a href=\"#5-set-vmware-tools-to-start-on-boot\" aria-label=\"5 set vmware tools to start on boot permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Set VMware Tools to start on boot</h4>\n<p>A script is required to add the compat6x library to boot time or VMware tools will not start properly. Enter these lines into the shell:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token command\"><span class=\"token info punctuation\"><span class=\"token path\">echo '</span></span><span class=\"token shell-symbol important\">#</span><span class=\"token bash language-bash\"><span class=\"token operator\">!</span>/bin/sh<span class=\"token string\">' > /usr/local/etc/rc.d/000-ldconfig.sh\necho '</span>/sbin/ldconfig -m /usr/local/lib/compat<span class=\"token string\">' >> /usr/local/etc/rc.d/000-ldconfig.sh\necho '</span>/usr/local/etc/rc.d/vmware-tools.sh restart<span class=\"token string\">' >> /usr/local/etc/rc.d/000-ldconfig.sh\necho '</span>/usr/local/bin/vmware-config-tools.pl -d</span></span><span class=\"token output\">' >> /usr/local/etc/rc.d/000-ldconfig.sh\nchmod a+x /usr/local/etc/rc.d/000-ldconfig.sh</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As bad as this is script is, it seems to fix the problem where the vSphere Client says it is not running even though everythng else says it is (terminal commands, guest VM options, VMXNET3 working). VMware Tools also does not start because it wants to run through setup again. Hopefully this fixes all of that.</p>\n<h4 id=\"6-add-the-vmxnet3-network-cards\" style=\"position:relative;\"><a href=\"#6-add-the-vmxnet3-network-cards\" aria-label=\"6 add the vmxnet3 network cards permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Add the VMXNET3 network cards</h4>\n<p>Shutdown the VM either through the shell (type exit then choose option 6) and add the VMXNET3 NICs as desired to replace your WAN and LAN network cards.</p>\n<p><em>You have to shutdown the virtual machine first before removing and adding network adapters. Make sure the adapter type is VMXNET3. Note the MAC addresses as well.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 708px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c8871fbbcd7aededebea15138d4e3dcf/d65de/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.20187793427232%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfUlEQVQ4y43T7WvTQBwH8PzrMuhkW/tuOkGciIgWpy8G7o0K3WrbFTr7sDy0adLm0jzc5XJ3eU5XkkhSBYdl80NeHFy+9z3CL9ybty8+nX1uNpunr05Pnp+cnDxvNOp7e3u1Wu3w8PDo6KjRaNTr9f39/VqtdnBw8Oz4+N2H5pfXL98/fcIJvKBp2mw2U1VV13XXJY7jYIwhhAgh27bLrcWCUuq6LoRQUZS5PDdt2Gr/4MaTiSSKkiQpimpZNgBgMLiRZZnnBVGULMuSRJHnBVCd61c8z9vc3V33ulzr+vtSW0ZRnKZpXDFWhh8E6/Xder3GGEuSpCqq45R3gRASQjDGcRz3ej1uwPOWZRNCiz+wg8Mw3K4pIfO5oioqY8xYGavVilK6Dff7fa7fH0PLBstlksTV+7kOANCWge+VB2G8WCwAABDCMAyDIPB8nzG22Ww6nQ538e3riJ/fTGbAch0vQTQaCcpkulB0aLsBIRQi5DhOWei6HmO+71NKN5tNu93mPl6c9cZy52banyhz05MNOhA0xfJVO9BQ6DiOJEmGaUZRhDG2oONSj1GapunV1RVnWVZ51zwvdkEIDYfD2XQ6nc54nh/8HI9vRVEUGfPKZsMwiqLIsiwvFdXze1EUBSFkWpFnsmGYpmHoAGgAJElShk3TfKDZtu3RcKQoKiEk3IrKz5YkSavVeiRMK1EUbWdjizEWx/Hl5eVD4TzPo0p4n+/7eZ6XQ/JwOAyjIAj/DWdZ1u12H28Ow93hslnX9aIo0jRd7+Ldt/0xGGNZlpUTJsuyZdsIIXcX8hdKKYIIQmiaJkKoDHe73cntLc/z0/8wqYxHI0EQz8/PfwFt7stMAX7ebgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pfsense-vmxnet3\"\n        title=\"pfsense-vmxnet3\"\n        src=\"/static/c8871fbbcd7aededebea15138d4e3dcf/d65de/3.png\"\n        srcset=\"/static/c8871fbbcd7aededebea15138d4e3dcf/53f68/3.png 213w,\n/static/c8871fbbcd7aededebea15138d4e3dcf/df70d/3.png 425w,\n/static/c8871fbbcd7aededebea15138d4e3dcf/d65de/3.png 708w\"\n        sizes=\"(max-width: 708px) 100vw, 708px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"7-configure-the-vmxnet3-network-adapters\" style=\"position:relative;\"><a href=\"#7-configure-the-vmxnet3-network-adapters\" aria-label=\"7 configure the vmxnet3 network adapters permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. Configure the VMXNET3 network adapters</h4>\n<p>Power on the VM and pfSense will alert you to set the interfaces once again. It you did everything correctly, they should show up as '<em>VMware Vmxnet3 Ethernet Controller</em>'.</p>\n<p>NOTE THEM DOWN BEFORE PFSENSE SCROLLS!</p>\n<p><em>pfSense will notify you there is a network interface mismatch by swapping the network cards.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 738px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d95fa18cef25a94a38011285ba36d112/4a768/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.95305164319248%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVQoz32QT08TQRjGp+x2y3Z3ujOzM7szu+xC6NWCJJDgecsWNMET3kj8FrTGpncsrQm7NMYLJHpojHjx4KfQuydN4CAqFDlYwz/TTiQYEn55DzOZvM/zzAO2X714u/uu2+1u7+ykSVqv16u1avXJYNZq1bXa2tXUarV6/Wmz+ezN7u6H7uv3Lzvg88dPJwdfv/3YO/y+/7N3fHT86+Cwd9Q77p2c9Pu/Ly4uzq9xdnZ2enr6p98/v7z8srcPHq+uLsblxaW4shSX48rCQrx0/8Hy8sOoXI6iaOEGcRxXKpUoih6trICZmRlFUXVdhyYcHR0FACgjI+BWMpkMACAIAjB/b348HJ8sThaLRd/3Xe66rksIsYaYpqncQFVVAADnHEzfnRZcBEFACIEQUkpN0ywMURRF13UZ56YzpTaYnZ0VQvi+PzExEYahbduO43ieZ5omhFDTNF3XtSG5XE5epRxjdOBsWVahUGCMIYRkYIwxIQRjTCnFGCOE5IEQIrWGzhSU7pQ0TZM5DcOQDzKbjJf5n6vYjLFB20IIz/PsIQghXddd1w2CgDE2qNB1hRCUUs654ziKokj1wXKpVDIMA2NsGAaEsPAPCKGqqrlcLpvNapqmqqqmadls9srfcRwwNTUlSyaEUEpt22aMCSEsy8rn81JX/hYhhDHO5/OyDt/3wdzcHCHE8zzGGOdcCDE2NuZ5HudcJr++jBCCENq2bVlWGIag3W5vbW2laZokSZqmnSFpmm5ubnY6nSRJWq1W+3lb0mq3ms3m+vr6xsZGo9H4C50grr+JECZCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pfsense-mac-addresses\"\n        title=\"pfsense-mac-addresses\"\n        src=\"/static/d95fa18cef25a94a38011285ba36d112/4a768/4.png\"\n        srcset=\"/static/d95fa18cef25a94a38011285ba36d112/53f68/4.png 213w,\n/static/d95fa18cef25a94a38011285ba36d112/df70d/4.png 425w,\n/static/d95fa18cef25a94a38011285ba36d112/4a768/4.png 738w\"\n        sizes=\"(max-width: 738px) 100vw, 738px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>You will have to enter vmx3f0 or vmx3f1 depending on the interface (not the entire name). Make sure you link the correct network adapter to the correct interface. Check the MAC addresses like we did in Part 2.</p>\n<p><em>Specify the network adapter which has been allocated for both your WAN and LAN. They will be either vmx3f0 or vmx3f1.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 738px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e92ea608bd1ac5fefef26912adb4901c/4a768/5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.2206572769953%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfklEQVQoz42SS0sbURTH77xu5j33MXcmM3GSiKALCcGFW1c6iSH6AcR+Dydx3fogUqmCborWbmwL2kIL3fQzlK67rFCLLRpdWOlocW4Ua6H0x+VwFud/7jl/Dth+vrm3/3pvb//F7sutre3OSmdhafnR8vLC4uLDxaWlTmd19fFKZ2Ft7cn6+vrGxsbOs503b999eLX7/ukm+Pzx09nRl2/fD05+fD3unp10T4+Ou93u6Un37Pz8/PLyMk1THtM0/ZVxcfEzvbo6ODwED2ZmJuPxRnMyrk9M1OpxHI9PxLVaPa7VG43GVEaz2Zy6w/T0dKPRmJ2dBUNDQwAAQRDAf8OLS6USqFarEELbtlVN03XdsizHcYwMXdclSRJFUfoTWZYBAAMDA2B4eFjXdYSQaZqyLIs3cJksy4qiiKJ4dzqehGEIRkdHKaWe5wmCkM/nfd93b6CU+hmqqv49dqFQAJVKxTAMQgiv5jHMME2TMUYpJYSwDMdxPM+zLKv3cxRFAADDMDDGCCEnAyHkuq5t257nUUoxxnw6x3EopblcDgAQBAEoFosAANd1oygqFAphGAZBkM/nwzCklDLGeFNCiKIokiRBCLkF1+JqtUoICcOQMea6Ll+bMRYEwa0SY8wnd13XNE0IYU88MjJCCEEI2bbNN0cIMcZ830cIQQhVVdU0jUdN02RZ5oZdiyuViiRJGGPLsswMwzByuZyiKLquG4bB+2qaZlmWoii3bl+Lx8bGgiAol8vFYrFcLvf390dRNDg4GEURXx5j7DiOqqqCINw9kr6+vp5h984TQsgt/cd5eh4D7Xa71WolSdLK4Mnc3FySJO2M+fneu0eSJL8BLOOxKCwHT4oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pfsense-allocate-nic\"\n        title=\"pfsense-allocate-nic\"\n        src=\"/static/e92ea608bd1ac5fefef26912adb4901c/4a768/5.png\"\n        srcset=\"/static/e92ea608bd1ac5fefef26912adb4901c/53f68/5.png 213w,\n/static/e92ea608bd1ac5fefef26912adb4901c/df70d/5.png 425w,\n/static/e92ea608bd1ac5fefef26912adb4901c/4a768/5.png 738w\"\n        sizes=\"(max-width: 738px) 100vw, 738px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Link the MAC addresses to the VM's settings if you are unsure which is the LAN and WAN.</p>\n<h4 id=\"8-make-sure-everything-is-working\" style=\"position:relative;\"><a href=\"#8-make-sure-everything-is-working\" aria-label=\"8 make sure everything is working permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. Make sure everything is working!</h4>\n<p>VMware Tools should be successfully installed natively on pfSense</p>\n<p><em>When finished, pfSense will return to its usual screen retaining all your previous changes and IP addresses.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 738px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d5b0935d92311b5fb43e382ad1ab4e1/4a768/6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.2206572769953%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACj0lEQVQoz3WSzU8TQRjGp/vR/Z7Z3U53Z7It7FK2AQ7ApQmBhEuhpYIcSbzzV7D0StCD0cRgwkEUYwyJGjSY4NEDUjERz941JnzYVqMGKRo6CI3W3+HNTGae9+OZAffu3lpff7rx/MX6s421R09W76/eWF65fmfl2tLS1eXbK2sPNjc3Hj+8ubX1cutVZXt7u1Kp7Oy82d3drVReg/dv3307+LB3+LF2+Kla+1qt1/c+16r1erX25cf3743GyfHx8cnJr58tHB0dNRqNg/19cGVmZqKQL10qjhXy+fFioVDMj40Xi8WJUmlycvJyk6mpswVjenq6VCrNzs6CMJsFAIiiKPCCLEkAAEEQeJ4H/ycWiwEAMpkMGB0dTaVSYRh2dXX5vk8p1TRNURSWgsW/EAQBANDb2wtyuRwhJAgCSqllWaZpSpKEmkAIdV2XZVnXdVattXI2mwX9/f22bbuua1kWhFBVVV3XDcNgl1o1bcQ9PT2KopimqaoqxljTNFmWMcaWZSGEWCKEkKZpCCHDMOLx+IV4YGAAYwwhZFaxFmKxGITQ8zyMcTKZtG2bTSE1HeU47kw8ODiYSCRs2zZN07IsXdeZ1RzHKYpCCLFtu23bYRiCkZERz/N83w/DsLu7m1KaTCYdx+F5HkKYyWRSqRTGGCEky7KqqudGnIqHh4cppYSQjo4OSinG2HVdwzA4joMQptPpIAhY9H2fEMJx3IV4aGgokUh4nuc4DhvmHCbu7Ox0XZcQkk6nHcehlLLJT2fO5XKCICCEVFXVNK31V4iiGI/HJUliURRFWZbZFoDTZwJ9fX3nBoqi2PZh2xoWBAFYWFiYm5ubbxJFUfkf2El5PvoT58vlchRFi4uLvwGO+be3Vo9m6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pfsense-success\"\n        title=\"pfsense-success\"\n        src=\"/static/0d5b0935d92311b5fb43e382ad1ab4e1/4a768/6.png\"\n        srcset=\"/static/0d5b0935d92311b5fb43e382ad1ab4e1/53f68/6.png 213w,\n/static/0d5b0935d92311b5fb43e382ad1ab4e1/df70d/6.png 425w,\n/static/0d5b0935d92311b5fb43e382ad1ab4e1/4a768/6.png 738w\"\n        sizes=\"(max-width: 738px) 100vw, 738px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><em>10Gbps networking!</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 373px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/324d20fd1302b9482e5879fbf009ef30/dcf6b/7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.863849765258216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXElEQVQY02XOS07CYBSG4c5BSGEFTFmIlx3oVhjQMgJCwgpAbgmaeEmMiiOgLWkhlia2Bfmb/heI2BaocYBiYWRAiSQ+eQdn8iWHktKpdjYrplOtROIvNiEwrMAwAsPyDCOwP/c6Ph4Xk8l2JtOv1aj7g6PG8cnD4X4+EMj5fDm/P+f35wN7hVCwHAqVaLoSDpdoukzTpU3FYPA8ErmMRpuxGPUoS2fV6s3tHcYYE4IJIWj48v5qeY73+dUb9J50fea63nK1XG3bcF2XAsZzqXBaKFYEobUeImRCOJtMRVGqN+pNjm9wTY7n5a6CMYZbCGPLsigAAITQNE0AjF8DgzjDqTdbLTyEITAM131bLBbz+fxjx2QyoRSlc31x1eC48XiMEFo/j7Dt2rL2KIqS1JGAYQxHI9u2rR22bTuOQ2maqiiKqqr6lqZpCCJd1eVut9/vmyYEAAz+IYR8A4egNqcP2ZORAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pfsense-vmxnet3-wi\"\n        title=\"pfsense-vmxnet3-wi\"\n        src=\"/static/324d20fd1302b9482e5879fbf009ef30/dcf6b/7.png\"\n        srcset=\"/static/324d20fd1302b9482e5879fbf009ef30/53f68/7.png 213w,\n/static/324d20fd1302b9482e5879fbf009ef30/dcf6b/7.png 373w\"\n        sizes=\"(max-width: 373px) 100vw, 373px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Credits:</p>\n<ul>\n<li><a href=\"https://doc.pfsense.org/index.php/VMware_Tools\">pfSense Docs</a></li>\n<li><a href=\"http://www.v-front.de/2013/06/how-to-install-or-update-VMware-tools.html\">v-front.de</a></li>\n</ul>\n<h3 id=\"give-esxi-a-static-ip\" style=\"position:relative;\"><a href=\"#give-esxi-a-static-ip\" aria-label=\"give esxi a static ip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Give ESXi a static IP</h3>\n<p>You wont be able to access your ESXi box through the vSphere Client as ESXi would not have a working IP address at this moment. It is best to give it a STATIC address over a DYNAMIC (DHCP) address as pfSense is a VM which starts after ESXi boots up. Therefore ESXi would not be able to obtain an address from DHCP and you would not be able to connect to it.</p>\n<h4 id=\"1-access-your-esxi-box-however-you-can\" style=\"position:relative;\"><a href=\"#1-access-your-esxi-box-however-you-can\" aria-label=\"1 access your esxi box however you can permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Access your ESXi box however you can</h4>\n<p>Either by a physical monitor and keyboard, KVM or IPMI (which may not work as it also needs its own IP address. Simply unplug and replug it to refresh its IP and find it under DHCP Leases in pfSense.)</p>\n<h4 id=\"2-hit-f2-and-log-in\" style=\"position:relative;\"><a href=\"#2-hit-f2-and-log-in\" aria-label=\"2 hit f2 and log in permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Hit F2 and log in</h4>\n<p>Provide your ESXi credentials, typically the username is 'root'</p>\n<h4 id=\"3-configure-the-management-network\" style=\"position:relative;\"><a href=\"#3-configure-the-management-network\" aria-label=\"3 configure the management network permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Configure the management network</h4>\n<p>Select 'Configure Management Network' then 'IP Configuration'.</p>\n<h4 id=\"4-enter-your-new-details\" style=\"position:relative;\"><a href=\"#4-enter-your-new-details\" aria-label=\"4 enter your new details permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Enter your new details</h4>\n<p>Highlight the radio and press space to select static. Enter an IP address that is not within the DHCP range you have specified in pfSense.</p>\n<p><em>Set pfSense to start up with ESXi.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 641px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c03a5eff1641709d81487744fc2e2d5/243e6/waprup4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.60093896713616%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8klEQVQoz2NwcnIKDg4OCgoKDg4OCAhwJwK4ubn5+PhYWloyBAUFJCclJCcnpqYmpaQkRUdHREdHxERHRUVFRINRTExkTHRkVFQ4lBsdGRkRFhMd6eXlweDuERQVmx0WlR4clhISDkJBoUlBoUnBYcmhEalBoUlhkWkg8YjU4PCU0IhUiGBAcIKjkydDcab1jHaHyU32E+qt++os+2otwAjB6K2x6K216K+znNhgM7HRdmKjzcQG62mtjinRFgzHl/EcmMe1ppd/aYfoun7+jZNFV/aIrZ8ouH6i6Ko+sfUTBNb0S6zuE1/XL7hjMsPuqQw7pzCs72G4sZ5x7zx+hgPz+TdNFFjUKrxjhsDe2Vz75gjumyOweybv/rmC++cK7prJe2Ce0IF5gtum8s5vZJ1bz7aig3lZO+OZZUw7ZwoyHF3Ie2kNz7mVfHc2c/w5x/j/OsP/a2B0FYYug8jvZ5lubea7vE7w9QGuX+eZ/99g3jJVgOHsSt63B1nfHWJ7fYDzwxGO7yeYvxxl/XWa7fdp1p8n2f6eYwJpvsTw+SjLm4OsX46xfT/O/O0k0/9r7DtmCTHMauTfNp1ny1SeXbP49s3j2TyFZ9MU3p2z+HbM5Ns2g3/vHO7D8zkOzefYNp1n6zSefXN5wAzeQ4v4O4v5AehA6VoNwncqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"waprup4\"\n        title=\"waprup4\"\n        src=\"/static/6c03a5eff1641709d81487744fc2e2d5/243e6/waprup4.png\"\n        srcset=\"/static/6c03a5eff1641709d81487744fc2e2d5/53f68/waprup4.png 213w,\n/static/6c03a5eff1641709d81487744fc2e2d5/df70d/waprup4.png 425w,\n/static/6c03a5eff1641709d81487744fc2e2d5/243e6/waprup4.png 641w\"\n        sizes=\"(max-width: 641px) 100vw, 641px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"5-restart-the-network-configuration\" style=\"position:relative;\"><a href=\"#5-restart-the-network-configuration\" aria-label=\"5 restart the network configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Restart the network configuration</h4>\n<p>Return to the main screen and restart when your management network when prompted. You should now be able to connect to it from the vSphere client through its new and static IP address.</p>\n<h3 id=\"make-pfsense-auto-start-with-esxi\" style=\"position:relative;\"><a href=\"#make-pfsense-auto-start-with-esxi\" aria-label=\"make pfsense auto start with esxi permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make pfSense auto-start with ESXi</h3>\n<p>If pfSense is now your router, it is very important to auto-start it with ESXi.</p>\n<ol>\n<li>Open the vSphere Client and connect to ESXi</li>\n<li>Select your host and click on the 'Configuration' tab</li>\n<li>Select 'Virtual Machine Startup/Shutdown' and click on 'Properties...' in the top right corner.</li>\n<li>Select the VM and click 'Move Up' until it reaches Automatic Startup. Adjust the delay if necessary. Click 'OK' when done.</li>\n</ol>\n<p><em>Ensure all the details are correct.</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 712px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9f178aaa3b094a48cf6338a264eebccb/c62b2/waprup5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.31924882629107%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACK0lEQVQoz33SS0/bQBAAYP//n0ARCAnRCwdADahC7aEXQAkJIlk/4td6d727dvyI4921E9txZSMqtYd+p3lo5jAa7fvj3ePjj8n9/WRyf3t7e3Nzc3V1dXJy8mV0enp6dnZ2fn5+Mbq8vLy+vp48PPz8dvfr64Vm6Obr6/zl+cWxbUoZxoQQghCilBFC4ijOR0VRSCmFEGVZ7oqilJInmQahv1oBAHTTNBFCEEJKWZ7nSZJkWeq67nK5BCug6wbGBAWIcT7s2m7jKNIICSmlQRBY6zWllBBCKdvEm2IUhkPXcdwwDKMogj7EGKdpmuc5QkgLRwjjMCSMR2zEI74b5VnG6FAoimKb53EcbzabUgilFIRQ03V9Pl+slktCQt/zfR/CIIA+9LwhcV0vCAIYBK7rea4HIXRdj1ImhKCUao5tv70tZtPZ09MzxhghZBiG4zg6AI5jW6ZlmqZhGIaue573ccskSaSUYRhqlu1M380Z8EwXbVWTlRXmaZwJzNK0UCwporQMo4yn5aE99iMpJSbEsiwNQggMa7V2t8WuqveHpi12Qql6V4qq3ktVqaoWUgmpuu547Lq+75MkmU1n0+lU45z3fa/2baXUoWn6/qiUOhwOSqmmaQ6jqlJ1XfefhCg5577vD8Nd27ZN03XdELRt96n9O21GXdeN31IOB8uyrN7vpRpUoz/BP9Snj1djjGmO4xBC8H8RQmzbBgBYlrVYLNbrNQBgPp//Bv9NuCC9AKkAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"waprup5\"\n        title=\"waprup5\"\n        src=\"/static/9f178aaa3b094a48cf6338a264eebccb/c62b2/waprup5.png\"\n        srcset=\"/static/9f178aaa3b094a48cf6338a264eebccb/53f68/waprup5.png 213w,\n/static/9f178aaa3b094a48cf6338a264eebccb/df70d/waprup5.png 425w,\n/static/9f178aaa3b094a48cf6338a264eebccb/c62b2/waprup5.png 712w\"\n        sizes=\"(max-width: 712px) 100vw, 712px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"ending-thoughts\" style=\"position:relative;\"><a href=\"#ending-thoughts\" aria-label=\"ending thoughts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ending thoughts</h3>\n<p>Our installation may be finished but pfSense offers many more features than such a router, firewall, DNS and DHCP server. In the future I will cover a range of popular features, packages and guides for pfSense that I feel aren't covered well enough.</p>\n<ul>\n<li>pfSense is now your router, it must be on and running to get a connection to the Internet</li>\n<li>Don't put your server into maintenance mode, ESXi will never start pfSense and you wont be able to access it without plugging and unplugging a bunch of things to be able to access the vSphere client and exit maintenance mode.</li>\n<li>Make regular back ups of the pfSense VM. One wrong move and your network will collapse.</li>\n<li>Always give static addresses to important infrastructure like ESXi, IPMI, IMM, Switches, Modems and of course, pfSense.</li>\n</ul>","timeToRead":9,"excerpt":"Now that our pfSense installation is set up and working, we will have to wrap up our installation with a few necessities such as VMware…","fileAbsolutePath":"/home/runner/work/calvin.me/calvin.me/master/posts/2014/2014-08-24-part-4-install-pfsense-esxi-5-5/index.md","frontmatter":{"title":"Part 4: Install pfSense on ESXi 5.5","categories":["Networking"],"tags":["esxi","install","pfsense","virtualised","vmware"],"thumbnail":{"childImageSharp":null,"extension":"svg","publicURL":"/static/be1707542ec7f3f37a6c851a708769fc/thumbnail.svg"}}}},"pageContext":{"filter":"/^.*\\/\\d{4}-\\d{2}-\\d{2}-part-4-install-pfsense-esxi-5-5\\/.*$/"}},
    "staticQueryHashes": []}