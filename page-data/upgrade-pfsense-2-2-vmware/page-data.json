{"componentChunkName":"component---src-templates-post-js","path":"/upgrade-pfsense-2-2-vmware","result":{"data":{"markdownRemark":{"html":"<p>pfSense 2.2 has been released! This release brings FreeBSD 10.1 but also fixes over 300 bugs as well. The biggest change for those virtualising on VMware will be the VMXNET3 label change from 'vmx3f' to 'vmx'.</p>\n<!-- more -->\n<h2 id=\"pfsense-22-changes\" style=\"position:relative;\"><a href=\"#pfsense-22-changes\" aria-label=\"pfsense 22 changes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pfSense 2.2 Changes</h2>\n<p>All the pfSense 2.2 changes can be viewed <a href=\"https://doc.pfsense.org/index.php/2.2_New_Features_and_Changes\">here</a>.</p>\n<p>The change which I believe caused the NICs to change their names is the update in OS base to FreeBSD 10.1. In FreeBSD 9 (pfSense 2.1.X), the VMXNET3 NICs are labelled as 'vmx3f' whereas FreeBSD 10 uses 'vmx'.</p>\n<h2 id=\"who-and-what-is-affected\" style=\"position:relative;\"><a href=\"#who-and-what-is-affected\" aria-label=\"who and what is affected permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Who and what is affected</h2>\n<p>Those that use VLANs will be the most affected. VLANs are bound to a parent interface (generally your LAN or vmx3f0). When your parent interface no longer exists, the VLAN stops to work.</p>\n<p>The second group of users to be affected are those who use packages that bind to specific interfaces. This varies depending on the package but I have had vnstat2 still reporting on vmx3f interfaces even after reinstallation.</p>\n<h2 id=\"how-to-safely-upgrade\" style=\"position:relative;\"><a href=\"#how-to-safely-upgrade\" aria-label=\"how to safely upgrade permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to safely upgrade</h2>\n<p>Assuming you are on VMware (as per the blog title), the first best thing to do is perform a snapshot/backup within vCenter/vSphere.</p>\n<ol>\n<li>Perform the update to 2.2. This is under System > Firmware.</li>\n<li>After the system updates and restarts, head over to the VM's console to reassign the interfaces.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 715px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75b8247e7fb5535528760ed83a6b6ac3/277d6/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.638497652582156%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVQY01XQwYrEIAwGYGctpRi1WY2Jtiis9DSnvv/T7WLZof1OCeSHJMo5h4NzblkWpdTr39fwelJ367r23mut27a11ogIEX+G4zjO82yt9d5LKe/3O+f8CAOAiMQYvwdEBIBPKyLee0S01hIRADzCbliWBQCMMSEE771z7j5zP0RrfZ0zTZOKMYoIEeWciYiZ94GZU0rMvA2llH3fSymImFKqtaaUlPc+hGCMsYOIrIO1lpnnef587nretYjW+q/+BR/9El7TMGaBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/75b8247e7fb5535528760ed83a6b6ac3/277d6/1.png\"\n        srcset=\"/static/75b8247e7fb5535528760ed83a6b6ac3/53f68/1.png 213w,\n/static/75b8247e7fb5535528760ed83a6b6ac3/df70d/1.png 425w,\n/static/75b8247e7fb5535528760ed83a6b6ac3/277d6/1.png 715w\"\n        sizes=\"(max-width: 715px) 100vw, 715px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>When asked about VLANs, answer 'no' to be given a list of your current VLANs and their interfaces.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 647px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c2d184e9c4cd6d642a44bb62c4615c77/f9e62/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVQY05XQu3KEMAwFUKfCHmNkPfzAYBtomOX/P3AnkKTYLqdToblXUkTEt3Ec1X+t64qIpRStde9dREIIiDjPMwCkGyKu6woAn8uv12tZlvM8nXPXddVa930vpRzHEULove/7HmM8z1NElFJft5/lWmsIobU2DENrLaWUcxaRWisA5JzneWbm1to0TZ/JIvKc7b1nZkSMMQIA3Zg5xsjMRCQizygizjljjGqtPVHMXH6llHrv27YRkTHGWjvdrLWIKCJa6+/yAPC8x3sfY/TeP5laa2st3IgIEcdxTCkNw/BX+w09WBmrOOkpJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/c2d184e9c4cd6d642a44bb62c4615c77/f9e62/2.png\"\n        srcset=\"/static/c2d184e9c4cd6d642a44bb62c4615c77/53f68/2.png 213w,\n/static/c2d184e9c4cd6d642a44bb62c4615c77/df70d/2.png 425w,\n/static/c2d184e9c4cd6d642a44bb62c4615c77/f9e62/2.png 647w\"\n        sizes=\"(max-width: 647px) 100vw, 647px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"4\">\n<li>Similar to your first-time setup, enter the matching interfaces for the WAN and LAN (vmx0 and vmx1 I would assume).</li>\n<li>When asked about your VLANs, enter the old interface such as vmx3f0_vlan10 (do not enter vmx0_vlan10) as shown earlier.</li>\n<li>Enter all interfaces including any optional interfaces you may have (e.g. vmx2, vmx3 etc.).</li>\n<li>When you have entered all the interfaces, pfSense will connect to the Internet and upgrade any packages it can find such as snort and squid.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 729px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4e439ff2ea3d2d9b66cd5cc4956d955/06066/updating-packages.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.8075117370892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVQoz42SyY7DIAxA05SYLaQ0EQoEswSiqv//haMpmp4yM30HSz48W166EEJKCRFjjM65fd+dc0IIpdQwDN3fhBcxRu+9UsoYI6XsPiTnHH6w1i7LMs/zuq7WWq21MUYIAQDncq0152yM2ffdWssYm6aJcw4AQghCyPV6/VXOOaeUcs7Hcdzvdyllk4dhIIQAAOecEEIpPZER0XvvnFvXFRGNMfQFY6xFKSUAMMZO5JRSCGFZFkRUSjXh04U9Ho9SSq31+Xxaa2ut27YxxsZxvFwuXde1eE5KqZSCiFrrduEm9H3/f+cY4zzP0zSN46iU4py3aQGAUvpu3njX7fv+O40v2sK99yGEUspxHO1t2tuFELz327a1i9xuN6015/wLVkcdbizbmDYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"updating packages\"\n        title=\"updating packages\"\n        src=\"/static/a4e439ff2ea3d2d9b66cd5cc4956d955/06066/updating-packages.png\"\n        srcset=\"/static/a4e439ff2ea3d2d9b66cd5cc4956d955/53f68/updating-packages.png 213w,\n/static/a4e439ff2ea3d2d9b66cd5cc4956d955/df70d/updating-packages.png 425w,\n/static/a4e439ff2ea3d2d9b66cd5cc4956d955/06066/updating-packages.png 729w\"\n        sizes=\"(max-width: 729px) 100vw, 729px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 786px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82f51f610c3d546bd56ac9fb0a48a6f9/d703b/capture-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.497652582159624%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABP0lEQVQY04XLPUgCYQCH8b93r56hLXEOrp5ZWGN7kplLCQ1NNbe26KB2GqdEEInlR+drV0iDtVaDm6PkR4E2OQSBQgR6oBBWS1hbGMKPZ3vQajReatXncuWt2fxQ1UGnM+h0h1XVz15vpK9+/73bfW21kbcKBc9awblUWHHdulx37h+u5RvH4vXMbN5iyQvCH1c2W47nn+JxnAA5PRc38Sl+6lw/oUwaFaNBMRqolqSBkWRCjoCSz4e0AaLTfUEvs6Ew1TIZQNZAxhBlmJGyOl2GkKokQTYhubNbrjYS0sG2fV5hGVmjyfwCRsqybM4+9xiL4RSg1mkpuL/h2Vpf3aRmMwUoIZRl/3PGccdAORBADMM/LNj9C44kp08CiXFShBwCJa8XFVGsRSJ1aa8eCtZEsSZJYz1Eo/d+f7tY/AYqFL6xDhBdQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Capture (1)\"\n        title=\"Capture (1)\"\n        src=\"/static/82f51f610c3d546bd56ac9fb0a48a6f9/d703b/capture-1.png\"\n        srcset=\"/static/82f51f610c3d546bd56ac9fb0a48a6f9/53f68/capture-1.png 213w,\n/static/82f51f610c3d546bd56ac9fb0a48a6f9/df70d/capture-1.png 425w,\n/static/82f51f610c3d546bd56ac9fb0a48a6f9/d703b/capture-1.png 786w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"8\">\n<li>Once finished pfSense will return to its usual console menu.</li>\n<li>Get a LAN connection. If you are on a VLAN this will not work, you require a LAN connection to reestablish a connection to pfSense.</li>\n<li>Log into the pfSense web configurator and change your VLAN parent interfaces to the new vmx interface.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 358px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/216c59c239d7deee08700b074c275501/270bd/vlans.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.441314553990615%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDklEQVQoz3WQ3XLSQBiGcwOd0aPamfZA6ngLemMdvYIeND3yyBlntLX+YXAgPxsbIMVEIAYSwBMGEQJp0rDhR1skwCbQdUKrwqjP0e6z88737Ut8P7WdWs1tNmG9flb7Mur1h9DtNRsX3S4OucT/h/jwUU5lMklRFFKpdCZzLAiptHgiSUI6xb/nAeAADwAAyWRSSCUZli6oatMw6vWv5cpnIkHTHMdyHMvQCQ4AhmFZhqEoKkEnAOBYluUA4Dg2FouxPJeg4xlRLBa1T3lFlmSiZRiSJEuSlM3mNE3TF5TL5VKppOQVUTyRZVlV1UqlooePJV3Xi7qu6Hq2WCCq1WqUehuNRuPxeC6Xyy+4OvA8//pNNPaOOhYERVFyC9RCgXv54vHDB492dgjbtru97vnFOcZ4tkQQBP1BH/kIYzyfz68lCq/a/v6ru9vx+/cI27Ic2OkPBrPZzF8CIeS6rud5QRD8kZMJxrhIkodbm0/W1gjbtpxOZ/AtDCOElsMQwtG/wgWSPIpEDtbXw8kQQtd1g1V83++6rjceX33hWk6n4eS9vaPtO8+3NgnLsjqdTqPRGHkeQmj6i8lk4jhnwx/DFel5lxirJHkYuf1s41a4NnShabaR789n8+XCXAjH4/HvtsJSFoWpu7sHGxtPb94g2u120zCMlnH6F61WyzTNFWWaluNU83mNojSK+gkvV1l5Luc27AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vlans\"\n        title=\"vlans\"\n        src=\"/static/216c59c239d7deee08700b074c275501/270bd/vlans.png\"\n        srcset=\"/static/216c59c239d7deee08700b074c275501/53f68/vlans.png 213w,\n/static/216c59c239d7deee08700b074c275501/270bd/vlans.png 358w\"\n        sizes=\"(max-width: 358px) 100vw, 358px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"11\">\n<li>Apply the new interface assignments and restart pfSense.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6686a80a518baa8a5d33cd78fab5b5ef/06341/reassign-network.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.19718309859155%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDklEQVQoz33Pa2+aUBgHcL7/V1mTrokT0W3WgkUOl3atoICcC3DAicABK42Xg4vdJU1q9kueN88lT/5C+DSFlgVNg7ounc/dsZJ6C/L0I3qeRvaUPDxmODydTm3bnj4QfqYpRigOQ4IQjeNH01Rk+X48VmR5oqr3Y2Wi3uuGYRi6fi7dMA3dODdUVRVsx1YUBQCgqhMAwO1o1OtLUl/q9Xo9SRp8HXTFrtTv90RR6kuiKA4Gg9+jTqcjOI7z6eqq2xUB0DRNA5qmA6D/BQAwDFOW764/X9/c3HQ6XyZvzpsACBghXde3zR/bD5qmYYxhTHzP99z5fOZkq6yqqtVqJYRhaDuz3X5/OByOl3DOm6aJoohggjHGCK3zvKpqxpgQx7E20Z6e7d1ud7jkeDxut1uEMKU0SVKMCESEUloyJlAaa5oGIeKc79/+XzyGCMdRTGkKEWas2tSbsiwFSqllWa7n7g+H/3wmGMdRlCQpgjDLVi+bDSsLIUmSB8uauW7bthdjc863zSuJ0wASCEmAyLqoqs02L6tzZtM0wzA6nU6c85af/bs8HI8t5/XL6zxIHJfYLnJ8kqzqVdEs17WAENQ0kBdlnufrfJ3nOWOseqeu67zIQ0KCxQIGCwiDLMuKYr1cLgUIg+/D4bfhrSzfDW9Ho9HItm3f9713fN+3HcexZ7O5O53as7kLIfQ87xfNorB1KdjGBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"reassign network\"\n        title=\"reassign network\"\n        src=\"/static/6686a80a518baa8a5d33cd78fab5b5ef/06341/reassign-network.png\"\n        srcset=\"/static/6686a80a518baa8a5d33cd78fab5b5ef/53f68/reassign-network.png 213w,\n/static/6686a80a518baa8a5d33cd78fab5b5ef/df70d/reassign-network.png 425w,\n/static/6686a80a518baa8a5d33cd78fab5b5ef/06341/reassign-network.png 512w\"\n        sizes=\"(max-width: 512px) 100vw, 512px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"12\">\n<li>Your interfaces should now be back in order and working again.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 645px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43da3d541e4e74d6ecdea78e161d9577/8498c/capture4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.56338028169014%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVQoz52SzZKrIBBGsSL/NI03REUFMUqlskve/+Vujcxsspqas6KAQ3d/BUHE2+327wQRvffGGOec995a23UdAFBKlVKUUvbD5XIhhBClFCI65zjnSinnnDFGSlk367tSSgAQQmit6+Jb7vv+OI5pmhhjTdMAwLZtlNK2bRFxnuecs/feOaeUIh+EEN7vd4zxfr/XCqWUGGPO2Tk3DMM4jjnnGCMAfMp9379er5RSKQUAtNaPx2PbtlIKIoaTGOM8z8aYT3kcx1JKznkYBqVU13XLsmitjTEAcL1e48k4jm3bfsrW2nVdU0rzPNd7nPO2bWskjLFpmkop1xMhRM38OzBrbc45hLDvez5ZliXnnFKSUnLOa2s1lG3b6pEQ4kt2zu37vpyklOAHxhghRAixLMvz+ayZpZSO4xhOEPFLrtVCCJzzj6EYY33fr+vqva9zIaIxxlqrtSaUUq21lJL8AWutUkoIAQD1PxJCmqb5jfwffoQo9iPyF/UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Capture\"\n        title=\"Capture\"\n        src=\"/static/43da3d541e4e74d6ecdea78e161d9577/8498c/capture4.png\"\n        srcset=\"/static/43da3d541e4e74d6ecdea78e161d9577/53f68/capture4.png 213w,\n/static/43da3d541e4e74d6ecdea78e161d9577/df70d/capture4.png 425w,\n/static/43da3d541e4e74d6ecdea78e161d9577/8498c/capture4.png 645w\"\n        sizes=\"(max-width: 645px) 100vw, 645px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"other-changes-and-fixes\" style=\"position:relative;\"><a href=\"#other-changes-and-fixes\" aria-label=\"other changes and fixes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Other Changes and Fixes</h2>\n<p>These are mainly due to the upgrade to 2.2 (which hasn't gone smoothly for a lot of people including myself) or the change of interfaces not changing package settings.</p>\n<h3 id=\"vnstat2\" style=\"position:relative;\"><a href=\"#vnstat2\" aria-label=\"vnstat2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vnstat2</h3>\n<p>There are two problems with vnstat, it does not have a database and it still lists the old interfaces.</p>\n<p>To create the database, run these two commands:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">mkdir -p /var/lib/vnstat\n/usr/local/bin/vnstat -u -i vmx0 # replace vmx0 with your preferred interface</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>To fix the issue with the old interfaces, edit the file /usr/local/www/vnstat2/config.php where it holds the list of interfaces.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token output\">vi /usr/local/www/vnstat2/config.php</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>You will need to change the following line to match your new interfaces:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell-session line-numbers\"><code class=\"language-shell-session\"><span class=\"token command\"><span class=\"token shell-symbol important\">$</span> <span class=\"token bash language-bash\">iface_list <span class=\"token operator\">=</span> array<span class=\"token punctuation\">(</span><span class=\"token string\">'vmx3f0'</span>, <span class=\"token string\">'vmx3f0_vlan10'</span>, <span class=\"token string\">'vmx3f0_vlan20'</span>, <span class=\"token string\">'vmx3f0_vlan30'</span>, <span class=\"token string\">'vmx3f0_vlan40'</span>, <span class=\"token string\">'vmx3f0_vlan50'</span>, <span class=\"token string\">'vmx3f1'</span>, <span class=\"token string\">'vmx3f2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></span>\n<span class=\"token command\"><span class=\"token shell-symbol important\">#</span> <span class=\"token bash language-bash\">delete 3f <span class=\"token keyword\">in</span> every interface to get vmx0_XXXXX instead of vmx3f0_XXXXX</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"havp-and-squid\" style=\"position:relative;\"><a href=\"#havp-and-squid\" aria-label=\"havp and squid permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HAVP and Squid</h3>\n<p>HAVP and Squid are both updated in version 2.2. The downside is that HAVP no longer works for me and Squid decided to go from version 2 to 3 without asking.</p>\n<p>Squid 3 provides c-icap antivirus built in along with clamd, a replacement for HAVP but not as nice. The downside is you won't get to use templates/web pages to notify users of viruses as easy as HAVP did.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 775px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5864872f2387aae21767c52b71b48045/49bb6/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.107981220657276%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVQY03XISU/CQAAF4P5hLlxYDj3oafwJ/AAwAcIBRTDWboGZli42tLN0oAqUdFpCTAQ9cMHA0eXly8vLk7DrEt+jQYCdaWjbWZp+Hg7vu53IsiIXhRBFnudC5EIIke2KrbWAEZlt1uvl26tkWpZp2zpCxqUnrkOSZBqGyniiWUhDSLeQiqCGzluFENr+9mP/dTrtj0fJbTTG11cQAAgAugEIAEOWtUrFrNeNWk2vVn9Qq5XHcnlYKimyLDmjkTcYhMpT9Kx4w4fp/Z3T68FmE7VaqHXrdjq/+d2u324H/b6EOZ8xNqN0vlwRPreDwI2iF0o9TDxCFmmabDZ/S1OJcx4zFjPG45hRii8hGJPo3Of/f99HhRndfNQPswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/5864872f2387aae21767c52b71b48045/49bb6/4.png\"\n        srcset=\"/static/5864872f2387aae21767c52b71b48045/53f68/4.png 213w,\n/static/5864872f2387aae21767c52b71b48045/df70d/4.png 425w,\n/static/5864872f2387aae21767c52b71b48045/49bb6/4.png 775w\"\n        sizes=\"(max-width: 775px) 100vw, 775px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"snort\" style=\"position:relative;\"><a href=\"#snort\" aria-label=\"snort permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Snort</h3>\n<p>Because of the new interface, Snort changes where it stores its logs and therefore the Snort tab will be empty. You can verify this by going to /var/log/snort where you will find a folder starting with 'vmx' and another with 'vmx3f'.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/98fe46aa17d556f09bc89d156753a5ea/7ca0c/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.821596244131456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVQY0z3O0W6EIBCF4aFVxKALKqBg2AIbQZpovPH9X62pZve/PpNvwPsgpez7fpomIQRCgBBBiCPUI1TDu+Zd27accyll0zRAKSWElCXGGFNKq6oC+ALAAATg+3NcXJXXjhBS1zXGGLz/EaITopdSKqXw1TB0j0fDOVNK3R8xxm7zZrXW/7JSK2Oec6eUGoahKArOec6/1toQQs5527aUUowxhBBjTCnt+36ep3MOns+XlMZab61d1zXnbIxxzmmt53leluU4jpRS13UfeRxHYwxj7A/ZghYUofz38gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/98fe46aa17d556f09bc89d156753a5ea/7ca0c/3.png\"\n        srcset=\"/static/98fe46aa17d556f09bc89d156753a5ea/53f68/3.png 213w,\n/static/98fe46aa17d556f09bc89d156753a5ea/df70d/3.png 425w,\n/static/98fe46aa17d556f09bc89d156753a5ea/7ca0c/3.png 569w\"\n        sizes=\"(max-width: 569px) 100vw, 569px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","timeToRead":4,"excerpt":"pfSense 2.2 has been released! This release brings FreeBSD 10.1 but also fixes over 300 bugs as well. The biggest change for those…","fileAbsolutePath":"/home/runner/work/calvin.me/calvin.me/master/posts/2015-01-25-upgrade-pfsense-2-2-vmware/index.md","frontmatter":{"title":"Upgrade to pfSense 2.2 on VMware","categories":["Networking"],"tags":["pfsense","upgrade","vmware"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#080808","images":{"fallback":{"src":"/static/e909bc88e82a7cec027db6092b1fa8c0/ccc8a/thumbnail.png","srcSet":"/static/e909bc88e82a7cec027db6092b1fa8c0/ccc8a/thumbnail.png 150w,\n/static/e909bc88e82a7cec027db6092b1fa8c0/67d4a/thumbnail.png 300w","sizes":"150px"},"sources":[{"srcSet":"/static/e909bc88e82a7cec027db6092b1fa8c0/3554d/thumbnail.webp 150w,\n/static/e909bc88e82a7cec027db6092b1fa8c0/c437f/thumbnail.webp 300w","type":"image/webp","sizes":"150px"}]},"width":150,"height":150}}}}}},"pageContext":{"filter":"/^.*\\/\\d{4}-\\d{2}-\\d{2}-upgrade-pfsense-2-2-vmware\\/.*$/"}},"staticQueryHashes":[]}