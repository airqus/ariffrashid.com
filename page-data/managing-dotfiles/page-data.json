{"componentChunkName":"component---src-templates-post-js","path":"/managing-dotfiles","result":{"data":{"markdownRemark":{"html":"<p>How I backup, restore and sync preferences and settings across computers.</p>\n<!-- more -->\n<p>Recently, I upgraded my Macbook at work but had to spend a few hours setting everything up again from scratch. This meant switching back and forth between both machines when the newer one was missing something I needed.</p>\n<p>The weekend came around and I started exploring the different dotfile options available. GitHub has a <a href=\"https://dotfiles.github.io/\">curated list of dotfile tools</a> I explored and eventually came to an approach I liked.</p>\n<p>Things that I already I wanted to do were:</p>\n<ol>\n<li>Backup to Git</li>\n<li>Support for Mac and Linux</li>\n<li>No dependencies e.g. Python-based tool</li>\n<li>Ability to backup other things like npm, pip, brew</li>\n</ol>\n<p>But the biggest thing I had to figure out was it better to copy or symlink the dotfiles...</p>\n<h2 id=\"copying-files-vs-symlinking-files\" style=\"position:relative;\"><a href=\"#copying-files-vs-symlinking-files\" aria-label=\"copying files vs symlinking files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Copying files vs Symlinking files</h2>\n<p>My first approach was 'copying' the files, as in every time there's a backup/restore, the files will be copied from the repository to their destination. There are some downsides to this:</p>\n<ol>\n<li>The repo is not always up to date</li>\n<li>Accidental deletion if 'restore' is run instead of 'backup'</li>\n<li>No constant 'single source of truth'</li>\n</ol>\n<p><a href=\"https://en.wikipedia.org/wiki/Symbolic_link\">Symlinking</a> on the other hand are like shortcuts/aliases to the original file. The downsides of symlinking on the other hand:</p>\n<ol>\n<li>Some applications may not like that files are links</li>\n<li>Moving symlinks may be troublesome i.e. the application does a migration</li>\n</ol>\n<p>After trying both solutions, I decided on <strong>symlinks</strong>. The reason: I did the accidental deletion instead of a backup (downside #2)</p>\n<h2 id=\"dotbot\" style=\"position:relative;\"><a href=\"#dotbot\" aria-label=\"dotbot permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dotbot</h2>\n<p>After going through the <a href=\"https://dotfiles.github.io/\">curated list of dotfile tools</a>, I landed on <a href=\"https://github.com/anishathalye/dotbot\">Dotbot</a> by <a href=\"https://github.com/anishathalye\">Anish Athalye</a>.</p>\n<blockquote>\n<p>Dotbot makes installing your dotfiles as easy as git clone $url &#x26;&#x26; cd dotfiles &#x26;&#x26; ./install, even on a freshly installed system!</p>\n</blockquote>\n<p>Dotbot met all my requirements:</p>\n<ol>\n<li>Can be backed up to a Git repository. In fact, Dotbot is installed as a gitmodule so it can be easily updated, following the single source of truth philosophy</li>\n<li>After cloning my repo, I only have to run the <a href=\"https://github.com/calvinbui/dotfiles/blob/master/install\">install</a> script to set everything up. Everything is managed in a <a href=\"https://github.com/calvinbui/dotfiles/blob/master/config.yaml\">single file</a></li>\n<li>It's a bash script without any other dependencies besides <code class=\"language-text\">git</code> and <code class=\"language-text\">bash</code></li>\n<li>Other than symlinking dotfiles, it can also execute commands to trigger other custom scripts.</li>\n</ol>\n<h2 id=\"custom-scripts\" style=\"position:relative;\"><a href=\"#custom-scripts\" aria-label=\"custom scripts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom scripts</h2>\n<p>Within the dotbot configuration, a <a href=\"https://github.com/anishathalye/dotbot/#shell\">shell</a> section can be configured to specify commands to be executed. I use this for:</p>\n<ul>\n<li>Installing <a href=\"https://github.com/robbyrussell/oh-my-zsh\">oh-my-zsh</a></li>\n<li>Installing <a href=\"https://brew.sh/\">brew</a> and brew/cask packages</li>\n<li>Installing pip modules</li>\n<li>Installing npm packages</li>\n<li>Installing <a href=\"https://github.com/VundleVim/Vundle.vim\">Vundle</a> and its plugins</li>\n</ul>\n<p>But before they can be installed, they need to be backed up. For that, I have written a <a href=\"https://github.com/calvinbui/dotfiles/blob/master/backup.sh\">backup script</a> that triggers each of the above. It is not ideal but it's the only way this can be done. Set this to a cron schedule and you'll get a somewhat automated backup for them.</p>\n<ul>\n<li><a href=\"https://github.com/calvinbui/dotfiles/blob/master/pip/backup.sh\">Create a requirements.txt of pip modules</a></li>\n<li><a href=\"https://github.com/calvinbui/dotfiles/blob/master/npm/backup.sh\">Create a packages.txt of NPM modules</a></li>\n<li><a href=\"https://github.com/calvinbui/dotfiles/blob/master/mac/generate-brewfile.sh\">Create a Brewfile</a></li>\n</ul>","timeToRead":3,"excerpt":"How I backup, restore and sync preferences and settings across computers. Recently, I upgraded my Macbook at work but had to spend a fewâ€¦","fileAbsolutePath":"/home/runner/work/calvin.me/calvin.me/master/posts/2019-02-11-managing-dotfiles/index.md","frontmatter":{"title":"Managing Dotfiles","categories":["Computers"],"tags":["dotbot"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#080808","images":{"fallback":{"src":"/static/cd6f62b002a3916f8562d4df545a53b3/ccc8a/thumbnail.png","srcSet":"/static/cd6f62b002a3916f8562d4df545a53b3/ccc8a/thumbnail.png 150w,\n/static/cd6f62b002a3916f8562d4df545a53b3/67d4a/thumbnail.png 300w","sizes":"150px"},"sources":[{"srcSet":"/static/cd6f62b002a3916f8562d4df545a53b3/3554d/thumbnail.webp 150w,\n/static/cd6f62b002a3916f8562d4df545a53b3/c437f/thumbnail.webp 300w","type":"image/webp","sizes":"150px"}]},"width":150,"height":150}}}}}},"pageContext":{"filter":"/^.*\\/\\d{4}-\\d{2}-\\d{2}-managing-dotfiles\\/.*$/"}},"staticQueryHashes":[]}