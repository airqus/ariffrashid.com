{"componentChunkName":"component---src-templates-post-js","path":"/gmail-mark-as-read-archive-alternative","result":{"data":{"markdownRemark":{"html":"<p>Isn't annoying that Gmail provides the option to either Archive or Delete emails from its notification? Well, no more! This script periodically moves Archived emails back into your Inbox and also marks them as read.</p>\n<!-- more -->\n<p>My first solution to this niggling problem was to use <a href=\"https://play.google.com/store/apps/details?id=com.Taptigo.Xposed.XNotifications&#x26;hl=en\">XNotifications</a> which adds the 'Mark As Read' option to Gmail notifications. XNotifications relies on the Xposed Framework which can be limiting to non-root or locked bootloader users. This was a simple solution but as time on went on, I became wary about how I would have to one day unroot and lock my bootloader.</p>\n<p>The problem with Archiving emails is:</p>\n<ul>\n<li>It does not show up in your inbox if unless you search for it</li>\n<li>They are not Marked as Read and hence searching for unread emails will also pull them up annoyingly</li>\n</ul>\n<h2 id=\"solution\" style=\"position:relative;\"><a href=\"#solution\" aria-label=\"solution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solution</h2>\n<p>My way around either Archiving emails or Deleting emails has been using <a href=\"https://www.google.com/script/start/\">Google Script</a> to move Archived emails back into my Inbox periodically. Doing this, I would tap the Archive email option and it would move back into my Inbox every hour.</p>\n<h2 id=\"the-script\" style=\"position:relative;\"><a href=\"#the-script\" aria-label=\"the script permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Script</h2>\n<p>This script searches for Archived emails, marks them as read, and moves them back into your inbox.</p>\n<p>I would recommend doing this manually first as there's a daily usage limit on the Gmail API.</p>\n<p>The two tags it searches are:</p>\n<ul>\n<li><code class=\"language-text\">label:unread -label:inbox</code>: Unread emails that are not in the Inbox.</li>\n<li><code class=\"language-text\">has:nouserlabels -in:Sent -in:Chat -in:Draft -in:Inbox</code>: Archived emails</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// the main run script</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// unread emails, mark them as read</span>\n  <span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"label:unread -label:inbox\"</span><span class=\"token punctuation\">,</span> GmailApp<span class=\"token punctuation\">.</span><span class=\"token function\">markThreadsRead</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>GmailApp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// archived emails, move them into the Inbox</span>\n  <span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"has:nouserlabels -in:Sent -in:Chat -in:Draft -in:Inbox\"</span><span class=\"token punctuation\">,</span> GmailApp<span class=\"token punctuation\">.</span><span class=\"token function\">moveThreadsToInbox</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>GmailApp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">label<span class=\"token punctuation\">,</span> method</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// if Archived Emails exist, do this method</span>\n  <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token function\">hasArchivedEmails</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token function\">searchGmail</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">hasArchivedEmails</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">query</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// is there archived emails?</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">Boolean</span><span class=\"token punctuation\">(</span>GmailApp<span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">searchGmail</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">query</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// search Gmail using a query, up to 100 results</span>\n  <span class=\"token keyword\">return</span> GmailApp<span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"how-to-use\" style=\"position:relative;\"><a href=\"#how-to-use\" aria-label=\"how to use permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to Use</h2>\n<ol>\n<li>Go to <a href=\"https://script.google.com\">https://script.google.com</a></li>\n<li>Copy and paste the code above into the Editor</li>\n<li>Name the Project at the top</li>\n<li>Save it</li>\n<li>Go to \"Resources > Current project's Triggers\"</li>\n<li>Set up a new trigger with the 'Run' method for every hour or as long as you want.</li>\n<li>Press Save</li>\n<li>Review the permissions and authorisation  required to access Gmail when prompted</li>\n</ol>\n<h2 id=\"flowchart\" style=\"position:relative;\"><a href=\"#flowchart\" aria-label=\"flowchart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flowchart</h2>\n<p>This is a basic flow chart of how this script works.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43cdc94146e652eb3012d6dd8c6ee2ea/12f38/flowchart.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.90140845070422%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEW0lEQVQ4y33SW2wUVRgH8NEEEhKe0ESND2qUKi8mKpFEfTAYJKYakBBMjJcQEkVAY6BAiIgPBklICPKgEeTScpFSGmppKgVtoBQvUHrZ7Q5zZs7cdna3nd25nJnZuZ0zs3vMUK4+mPwfzy/fd/L/GMUlIoqMiO795+CiAwvX92948+iSj3vW6CHVPFKqJ0UPGxH9dmhP6/G31vWve/t4a9uFr6oRLdUT5iYOzZju/vPHVw8teu/0qsXtr7/f/eEM1m7jHRd3Ldz/wvLOZS8feOnzc213sezgcp0OFdn2XPfRXN+R691nJgdLdqLaccnGRTsuo3QQjh4e6Tw2dvbgWNeAdHUqaJb9m3jGV/zUjKiGqUZpkVJAqUBpoUHZJuUpVSnVKS1TamFaC2nZT8t+egsrLpFQLEYJHC2Djb1gY6+wuV/acSG39Vxh2zlp+wDYdJb7ogfuGiyavlYn5fr9WLFjhVJ53xXArAEPruUfWC/O2SrP2SLN3gxntwFmLWA+4eduUjlTjZuqS1QvuQe7RKmnihnJf1fk4bI8XJEvacJFjRvU4KUSvFKBF0ty3pL9RvbSS5T/Yi+R/UQNPDVw1ABpkVNw7IJjy4ED60jyPdWzVctWvMZ9WHKIhCIxpOX8SeeHuc7hJ92OZ932+ejQfOdIi9vxnNuxAB14zPlpXkX4XQ6p4sa3sJxVjUUHS3WqX95unXrN7F1m9a6wet41z6+q9a80epYbZ1eapxfXBtYoTih7qewR2UsYySHi3STQawgB5T3KhxRSOjZi59RIoJRzm4JPYUBFJ7kT5o6EWRIeYd6KgJ8AI+S3/QZmbRLm7xS7J0VMJQeLNp5h0r1YQFiwMY9wwYjyXsJdq0gv7lUe+UZu2SU/85388A5xdRcwY2hFghlCK+TNEDqEmZmpuqTiRtAKJDMQnZhVPWH3EHxqp8BsFGZthm/sF86wnIWBFfNWDBHmrJi1CAMR0bzkvBZu+cteP2R+ecXceR0VEGEblJ3QwYoOfvt5gDBIKcgw5m0sOYmASIZ5hKtB+n3Omfuz2nKi9Gi71nKiNF6LC7UoX09ZTEFCgZNwVgzCJoiafNSUvBTYhLUzTKaDZD/rPXGs9Pypcssv5VfOTI0ZccHGeSNmzZi3MI+IgAg/WeNHpoSxabkaQS9lLcxAhCUUCwiPV6Or0+G16XCiFmVfMqOChfMWzk2H45iO7RnmmU/hvK955rMbrQfH3ZSzMCPY8Y1aAK1QQdGE7heqvmAEeb2erwachXMGHtWz/W8MF+HqLnHDr/CjTuHQCPAbIiKMgMiU3+iEwdI+fWmfvqRP/+APY9IiACXAJnkTTxgxb2MhTCVKxZSKTSomzVs984hUg8a+nPvQYfXp46XHO4oLTpau6fGkmY2dMDBrY4AIb2PRxKJ1OzNYQKRST7ug39qvrxiovtOvrx408ibmrKwMLlshC4/IvYd59zyhkyhuotVT1cuiuClnkzv5H/wvLT52hTqpUgYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flowchart\"\n        title=\"Flowchart\"\n        src=\"/static/43cdc94146e652eb3012d6dd8c6ee2ea/12f38/flowchart.png\"\n        srcset=\"/static/43cdc94146e652eb3012d6dd8c6ee2ea/53f68/flowchart.png 213w,\n/static/43cdc94146e652eb3012d6dd8c6ee2ea/df70d/flowchart.png 425w,\n/static/43cdc94146e652eb3012d6dd8c6ee2ea/12f38/flowchart.png 580w\"\n        sizes=\"(max-width: 580px) 100vw, 580px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","timeToRead":2,"excerpt":"Isn't annoying that Gmail provides the option to either Archive or Delete emails from its notification? Well, no more! This scriptâ€¦","fileAbsolutePath":"/home/runner/work/calvin.me/calvin.me/master/posts/2016-12-15-gmail-mark-as-read-archive-alternative/index.md","frontmatter":{"title":"Gmail Mark As Read Alternative","categories":["Mobile","Programming"],"tags":["email"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/fd8793646fced02354f68a52b4e9702a/ccc8a/thumbnail.png","srcSet":"/static/fd8793646fced02354f68a52b4e9702a/ccc8a/thumbnail.png 150w,\n/static/fd8793646fced02354f68a52b4e9702a/67d4a/thumbnail.png 300w","sizes":"150px"},"sources":[{"srcSet":"/static/fd8793646fced02354f68a52b4e9702a/3554d/thumbnail.webp 150w,\n/static/fd8793646fced02354f68a52b4e9702a/c437f/thumbnail.webp 300w","type":"image/webp","sizes":"150px"}]},"width":150,"height":150}}}}}},"pageContext":{"filter":"/^.*\\/\\d{4}-\\d{2}-\\d{2}-gmail-mark-as-read-archive-alternative\\/.*$/"}},"staticQueryHashes":[]}